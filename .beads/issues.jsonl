{"id":"mantle-0d5","title":"Backtest and impact preview","description":"Run patterns against historical PRs for impact preview.\n\n## PRD References\n- Task 4.9, 4.10, 4.10a\n- D12 (Engagement loop)\n- D28 (Diff storage)\n\n## Acceptance Criteria\n- [ ] Backtest runs against historical PRs\n- [ ] Results stored in backtestSummary\n- [ ] Impact preview on validation cards","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.193018-05:00","updated_at":"2025-12-20T20:39:14.193018-05:00","dependencies":[{"issue_id":"mantle-0d5","depends_on_id":"mantle-fjo","type":"parent-child","created_at":"2025-12-20T20:39:14.25523-05:00","created_by":"daemon"}]}
{"id":"mantle-0pi","title":"Build violation detection module (pattern + diff → violations)","description":"Core module that analyzes diff against pattern.\n\n## PRD References\n- Task 3.13\n\n## Acceptance Criteria\n- [ ] Accepts pattern and diff content\n- [ ] Returns violations with file, line, description\n- [ ] Handles code and file-naming patterns\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/enforcement/detect-violations.ts\n- lib/enforcement/prompts/violation-check.ts\n\n### Dependencies\nNone\n\n### Notes\nUsed by backtest and PR enforcement.\nCost: ~$0.10-0.30 per PR analysis.\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:23.371242-05:00","updated_at":"2025-12-20T20:39:23.371242-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-0pi","depends_on_id":"mantle-2on","type":"parent-child","created_at":"2025-12-20T20:39:23.434637-05:00","created_by":"daemon"},{"issue_id":"mantle-0pi","depends_on_id":"mantle-hgt","type":"blocks","created_at":"2025-12-20T20:39:23.497935-05:00","created_by":"daemon"}]}
{"id":"mantle-0qy","title":"Implement on-demand installation token generation","description":"Generate installation tokens using @octokit/auth-app.\n\n## PRD References\n- Task 1.8\n- D15 (On-demand tokens)\n\n## Acceptance Criteria\n- [ ] getInstallationToken(installationId) utility\n- [ ] JWT signed with App private key\n- [ ] Octokit instance created with token\n- [ ] No tokens stored in database\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/auth.ts\n\n### Dependencies\n- @octokit/auth-app\n- @octokit/rest\n\n### Notes\nPer D15: @octokit/auth-app handles caching and refresh.\nCreate Octokit instance at job start, reuse throughout.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:16.896672-05:00","updated_at":"2025-12-20T20:39:16.896672-05:00","dependencies":[{"issue_id":"mantle-0qy","depends_on_id":"mantle-g2w","type":"parent-child","created_at":"2025-12-20T20:39:16.962278-05:00","created_by":"daemon"},{"issue_id":"mantle-0qy","depends_on_id":"mantle-bm0","type":"blocks","created_at":"2025-12-20T20:39:17.035819-05:00","created_by":"daemon"}]}
{"id":"mantle-0yn","title":"Fetch repository metadata and file tree","description":"Fetch repo metadata and recursive file tree from GitHub.\n\n## PRD References\n- Task 2.1\n\n## Acceptance Criteria\n- [ ] Repo metadata fetched (name, description, default branch)\n- [ ] File tree fetched recursively\n- [ ] Respect .gitignore patterns\n- [ ] Handle large repos gracefully\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/repo.ts\n- lib/github/tree.ts\n\n### Dependencies\n- @octokit/rest\n\n### Notes\nUse GET /repos/{owner}/{repo}/git/trees/{sha}?recursive=1\nFilter out common non-code files (.lock, node_modules, etc.)\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:17.4597-05:00","updated_at":"2025-12-20T20:39:17.4597-05:00","labels":["phase:2"],"dependencies":[{"issue_id":"mantle-0yn","depends_on_id":"mantle-457","type":"parent-child","created_at":"2025-12-20T20:39:17.521295-05:00","created_by":"daemon"},{"issue_id":"mantle-0yn","depends_on_id":"mantle-0qy","type":"blocks","created_at":"2025-12-20T20:39:17.584836-05:00","created_by":"daemon"}]}
{"id":"mantle-0zt","title":"Handle PR merged/closed webhooks for evolution lifecycle","description":"Update evolution request on PR lifecycle.\n\n## PRD References\n- Task 5b.16\n- D27 (Evolution)\n\n## Acceptance Criteria\n- [ ] PR merge → status='historical'\n- [ ] PR closed → status='cancelled'\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/api/webhooks/github/route.ts\n- lib/evolution/lifecycle.ts\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:49.631035-05:00","updated_at":"2025-12-20T20:40:49.631035-05:00"}
{"id":"mantle-19d","title":"PR comments and status checks","description":"Post inline comments and update status checks.\n\n## PRD References\n- Task 5b.9-5b.13\n- D12 (Attribution)\n\n## Acceptance Criteria\n- [ ] Inline comments for violations\n- [ ] Status check based on severity\n- [ ] Pattern owner attribution","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.782338-05:00","updated_at":"2025-12-20T20:39:14.782338-05:00","dependencies":[{"issue_id":"mantle-19d","depends_on_id":"mantle-hxx","type":"parent-child","created_at":"2025-12-20T20:39:14.843674-05:00","created_by":"daemon"}]}
{"id":"mantle-1am","title":"Implement consistency assessment with rubric","description":"LLM assesses implementation consistency with explicit rubric.\n\n## PRD References\n- Task 3.8\n- D20 (Consistency rubric)\n\n## Acceptance Criteria\n- [ ] Consistency rubric in prompt (high/medium/low)\n- [ ] consistencyNote captured for UI\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/prompts/consistency.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D20: high=identical, medium=variations, low=different approaches\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:22.179188-05:00","updated_at":"2025-12-20T20:39:22.179188-05:00","dependencies":[{"issue_id":"mantle-1am","depends_on_id":"mantle-1an","type":"parent-child","created_at":"2025-12-20T20:39:22.241816-05:00","created_by":"daemon"},{"issue_id":"mantle-1am","depends_on_id":"mantle-hgt","type":"blocks","created_at":"2025-12-20T20:39:22.304092-05:00","created_by":"daemon"}]}
{"id":"mantle-1an","title":"Multi-dimensional confidence scoring","description":"Compute confidence across 4 dimensions with health signals.\n\n## PRD References\n- Task 3.7-3.11\n- D11 (4 dimensions)\n- D20 (Consistency)\n- D23 (Health signals)\n- D24 (Insight rules)\n\n## Acceptance Criteria\n- [ ] Evidence, Adoption, Establishment, Location dimensions\n- [ ] Consistency assessment with rubric\n- [ ] Health signals for 5 categories\n- [ ] Tier derivation (strong/emerging/moderate/weak/legacy)\n- [ ] Insight generation with json-rules-engine","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.310044-05:00","updated_at":"2025-12-20T20:39:13.310044-05:00","dependencies":[{"issue_id":"mantle-1an","depends_on_id":"mantle-5lg","type":"parent-child","created_at":"2025-12-20T20:39:13.372605-05:00","created_by":"daemon"}]}
{"id":"mantle-1r0","title":"AI Agent Sync dashboard widget (Workflow 10)","description":"Show sync status and manual regenerate.\n\n## PRD References\n- Task 5a.9\n\n## Acceptance Criteria\n- [ ] Sync status indicator\n- [ ] Last updated timestamp\n- [ ] Pattern counts per format\n- [ ] Manual regenerate button\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/dashboard/context-sync-widget.tsx\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:47.989948-05:00","updated_at":"2025-12-20T20:40:47.989948-05:00"}
{"id":"mantle-1r8","title":"Pattern detail view and evidence management","description":"Full pattern detail with edit and evidence management.\n\n## PRD References\n- Task 4.7, 4.13\n- D21 (Evidence autocomplete)\n\n## Acceptance Criteria\n- [ ] Full pattern detail with metadata\n- [ ] Edit description and rationale\n- [ ] Evidence add/remove with autocomplete","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.045229-05:00","updated_at":"2025-12-20T20:39:14.045229-05:00","dependencies":[{"issue_id":"mantle-1r8","depends_on_id":"mantle-fjo","type":"parent-child","created_at":"2025-12-20T20:39:14.109698-05:00","created_by":"daemon"}]}
{"id":"mantle-2ah","title":"ContextFileConfig data model and API","description":"Store format, targetPath, syncEnabled per repo.\n\n## PRD References\n- Task 5a.1\n- D32 (Claude + Cursor formats)\n\n## Acceptance Criteria\n- [ ] ContextFileConfig table created\n- [ ] CRUD API for config\n- [ ] Default configs on repo connection\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/context-configs.ts\n- app/api/repos/[id]/context-config/route.ts\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:47.242574-05:00","updated_at":"2025-12-20T20:40:47.242574-05:00"}
{"id":"mantle-2c1","title":"Build pattern detail view","description":"Full pattern page with provenance, evidence, confidence.\n\n## PRD References\n- Task 4.7\n- D13 (Pattern mental model)\n\n## Acceptance Criteria\n- [ ] Pattern name, description, type, status\n- [ ] Confidence breakdown\n- [ ] Evidence list with GitHub links\n- [ ] Provenance links\n- [ ] Edit buttons for authoritative\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/patterns/[id]/page.tsx\n- components/patterns/pattern-header.tsx\n- components/patterns/evidence-list.tsx\n- components/patterns/provenance-list.tsx\n\n### Notes\nGitHub links use capturedAtSha for stable URLs.\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:46.141044-05:00","updated_at":"2025-12-20T20:40:46.141044-05:00"}
{"id":"mantle-2on","title":"Shared violation detection module","description":"Build core violation detection for backtest and PR enforcement.\n\n## PRD References\n- Task 3.12-3.15\n- D29 (Similarity detection)\n\n## Acceptance Criteria\n- [ ] Violation detection works on pattern + diff\n- [ ] Returns violations with file, line, description\n- [ ] Similarity detection for duplicate candidates","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.602554-05:00","updated_at":"2025-12-20T20:39:13.602554-05:00","dependencies":[{"issue_id":"mantle-2on","depends_on_id":"mantle-5lg","type":"parent-child","created_at":"2025-12-20T20:39:13.666504-05:00","created_by":"daemon"}]}
{"id":"mantle-2ou","title":"Run health signals prompt per pattern","description":"Single prompt covering all 5 health signal categories.\n\n## PRD References\n- Task 3.9\n- D23 (Health signals)\n\n## Acceptance Criteria\n- [ ] Health signals prompt covers all 5 categories\n- [ ] Results stored in Pattern.healthSignals JSONB\n- [ ] hasWarnings flag set for quick filtering\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/health-signals.ts\n- lib/extraction/prompts/health-signals.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D23: error-handling, deprecated-api, consistency, security, completeness\nCost: ~$0.01-0.02 per pattern\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:22.388923-05:00","updated_at":"2025-12-20T20:39:22.388923-05:00","dependencies":[{"issue_id":"mantle-2ou","depends_on_id":"mantle-1an","type":"parent-child","created_at":"2025-12-20T20:39:22.451333-05:00","created_by":"daemon"},{"issue_id":"mantle-2ou","depends_on_id":"mantle-hgt","type":"blocks","created_at":"2025-12-20T20:39:22.513416-05:00","created_by":"daemon"}]}
{"id":"mantle-2y9","title":"Build pattern dashboard with filtering and sorting","description":"Full dashboard with filters by status, tier, repo.\n\n## PRD References\n- Task 4.8\n- D17 (Queue sorting)\n\n## Acceptance Criteria\n- [ ] Filter by status, tier, repo, type\n- [ ] Sort by confidence score\n- [ ] Queue sorting algorithm implemented\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/patterns/page.tsx\n- components/patterns/filter-bar.tsx\n- components/patterns/pattern-grid.tsx\n\n### Notes\nPer D17: tierWeight * 10000 + backtestViolations\n\n## Effort\n6 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.228402-05:00","updated_at":"2025-12-20T20:40:46.228402-05:00"}
{"id":"mantle-31q","title":"Production-ready UX, error handling, and maintenance features","description":"Add error handling, retry logic, loading states, empty states,\nre-extraction, impact digest, and auto-maintenance features.\n\n## PRD References\n- Section 6.2 Phase 6\n\n## Effort\n6 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:12.174413-05:00","updated_at":"2025-12-20T20:39:12.174413-05:00"}
{"id":"mantle-37n","title":"Context file generation and sync","description":"Generate markdown context files with format adapters.\n\n## PRD References\n- Task 5a.1-5a.9\n- D32 (Claude + Cursor formats)\n- D33 (Marker-based append)\n- D36 (Debounced sync)\n\n## Acceptance Criteria\n- [ ] Patterns transformed to markdown\n- [ ] Claude and Cursor format adapters\n- [ ] Marker-based append preserves user content\n- [ ] Debounced sync on pattern changes","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.486968-05:00","updated_at":"2025-12-20T20:39:14.486968-05:00","dependencies":[{"issue_id":"mantle-37n","depends_on_id":"mantle-g5w","type":"parent-child","created_at":"2025-12-20T20:39:14.549771-05:00","created_by":"daemon"}]}
{"id":"mantle-3ai","title":"Set up GitHub webhook endpoint with signature verification","description":"Endpoint for PR events with security verification.\n\n## PRD References\n- Task 5b.1\n\n## Acceptance Criteria\n- [ ] Endpoint at /api/github/webhook\n- [ ] Signature verified\n- [ ] 401 for invalid signatures\n- [ ] Rejected webhooks logged\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/api/github/webhook/route.ts\n- lib/github/webhook-verify.ts\n\n### Dependencies\n- @octokit/webhooks-methods\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:48.076285-05:00","updated_at":"2025-12-20T20:40:48.076285-05:00","labels":["critical-path"]}
{"id":"mantle-3bw","title":"File tree analysis for filesystem patterns","description":"Extract directory structure and file patterns.\n\n## PRD References\n- Task 3.16\n\n## Acceptance Criteria\n- [ ] Directory structure extracted with depth\n- [ ] File names grouped by pattern\n- [ ] Path patterns identified\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/filesystem/tree-analysis.ts\n\n### Dependencies\nNone\n\n### Notes\nAnalyze for naming conventions, directory structures, co-location.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:24.281891-05:00","updated_at":"2025-12-20T20:39:24.281891-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-3bw","depends_on_id":"mantle-61c","type":"parent-child","created_at":"2025-12-20T20:39:24.345267-05:00","created_by":"daemon"},{"issue_id":"mantle-3bw","depends_on_id":"mantle-3eb","type":"blocks","created_at":"2025-12-20T20:39:24.408253-05:00","created_by":"daemon"}]}
{"id":"mantle-3eb","title":"Design extraction prompt with pattern schema","description":"Design the LLM prompt for pattern extraction with clear schema.\n\n## PRD References\n- Task 3.1\n- D1 (Pattern abstraction)\n\n## Acceptance Criteria\n- [ ] Prompt requests structured JSON output\n- [ ] Pattern schema clearly defined\n- [ ] Examples of good patterns included\n- [ ] Confidence justifications requested\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/prompts/extraction.ts\n\n### Dependencies\nNone\n\n### Notes\nRequest: name, description, category, examples, confidence per dimension.\nCategory: naming, structure, error-handling, api, data-flow, testing, documentation\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:20.605009-05:00","updated_at":"2025-12-20T20:39:20.605009-05:00","labels":["phase:3"],"dependencies":[{"issue_id":"mantle-3eb","depends_on_id":"mantle-c6l","type":"parent-child","created_at":"2025-12-20T20:39:20.669659-05:00","created_by":"daemon"}]}
{"id":"mantle-3ic","title":"GitHub webhook and PR analysis pipeline","description":"Webhook endpoint with PR analysis for violations.\n\n## PRD References\n- Task 5b.1-5b.4, 5b.7, 5b.8\n- D30 (Dual channel)\n\n## Acceptance Criteria\n- [ ] Webhook receives and verifies PR events\n- [ ] Diff fetched and analyzed\n- [ ] Violations stored with severity","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.634206-05:00","updated_at":"2025-12-20T20:39:14.634206-05:00","dependencies":[{"issue_id":"mantle-3ic","depends_on_id":"mantle-hxx","type":"parent-child","created_at":"2025-12-20T20:39:14.69851-05:00","created_by":"daemon"}]}
{"id":"mantle-3jf","title":"Add rationale field (the 'Why') on promote","description":"Free text field for human-provided reasoning.\n\n## PRD References\n- Task 4.5\n- D3 (Provenance moat)\n\n## Acceptance Criteria\n- [ ] Rationale text field in promote modal\n- [ ] Optional but encouraged\n- [ ] Stored in Pattern.rationale\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/actions/promote-modal.tsx\n\n### Notes\nPer D3: Rationale is the 'Why' that makes pattern valuable.\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:45.954595-05:00","updated_at":"2025-12-20T20:40:45.954595-05:00"}
{"id":"mantle-3nf","title":"Loading states, empty states, and UX refinements","description":"Polish for production-ready UX.\n\n## PRD References\n- Task 6.3, 6.4, 6.6, 6.6a, 6.8\n\n## Acceptance Criteria\n- [ ] Loading indicators for async operations\n- [ ] Empty states for all list views\n- [ ] Pattern editing post-validation","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:15.231966-05:00","updated_at":"2025-12-20T20:39:15.231966-05:00","dependencies":[{"issue_id":"mantle-3nf","depends_on_id":"mantle-31q","type":"parent-child","created_at":"2025-12-20T20:39:15.295652-05:00","created_by":"daemon"}]}
{"id":"mantle-42m","title":"Post pattern evolution PR comments","description":"Notify pattern owner on evidence modification.\n\n## PRD References\n- Task 5b.10\n- D27 (Evolution)\n\n## Acceptance Criteria\n- [ ] Comment when evidence modified\n- [ ] Different format for canonical\n- [ ] Diff summary included\n- [ ] Review link\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/enforcement/evolution-comment.ts\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:49.111858-05:00","updated_at":"2025-12-20T20:40:49.111858-05:00"}
{"id":"mantle-457","title":"Repository content fetching","description":"Fetch repository files and tree structure from GitHub.\n\n## PRD References\n- Task 2.1, 2.2, 2.3, 2.4, 2.5\n\n## Acceptance Criteria\n- [ ] Repo metadata fetched and stored\n- [ ] File tree fetched recursively\n- [ ] File content fetched with rate limiting\n- [ ] Trigger.dev job orchestrates full ingestion","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:12.701985-05:00","updated_at":"2025-12-20T20:39:12.701985-05:00","dependencies":[{"issue_id":"mantle-457","depends_on_id":"mantle-w6l","type":"parent-child","created_at":"2025-12-20T20:39:12.766764-05:00","created_by":"daemon"}]}
{"id":"mantle-4gm","title":"Initialize Next.js project and deploy to Vercel","description":"Create Next.js 14+ project with App Router, TypeScript, Tailwind CSS.\nConfigure Vercel deployment with preview environments.\n\n## PRD References\n- Task 1.1\n- D7 (Tech stack)\n\n## Acceptance Criteria\n- [ ] Next.js project with TypeScript and Tailwind configured\n- [ ] Vercel deployment working with automatic previews on PR\n- [ ] Basic health check endpoint responding\n\n## Implementation Details\n\n### Files to Create/Modify\n- package.json\n- next.config.js\n- tailwind.config.js\n- tsconfig.json\n- app/api/health/route.ts\n\n### Dependencies\n- next@14\n- typescript\n- tailwindcss\n- @types/node\n- @types/react\n\n### Notes\nPer D7: Tech stack is Supabase + Vercel + Trigger.dev.\nUse App Router for all routes.\n\n## Effort\n3 hours","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:15.540792-05:00","updated_at":"2025-12-20T20:51:41.420843-05:00","closed_at":"2025-12-20T20:51:41.420845-05:00","labels":["phase:1"],"dependencies":[{"issue_id":"mantle-4gm","depends_on_id":"mantle-81h","type":"parent-child","created_at":"2025-12-20T20:39:15.604593-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz","title":"Framework Migration: NestJS → Hono + Next.js → TanStack Router","description":"Migrate the Mantle monorepo infrastructure before feature development:\n- Backend: NestJS → Hono\n- Frontend: Next.js → TanStack Router + Vite\n- Preserve: Drizzle schema, Supabase migrations, Trigger.dev integration\n\nRationale:\n- Hono: Lighter weight, native Bun support, simpler middleware model\n- TanStack Router: Type-safe routing, faster Vite dev server\n- Both: Better alignment with modern edge-first deployment","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-22T17:19:34.812763-05:00","updated_at":"2025-12-23T20:18:23.834758-05:00","closed_at":"2025-12-23T20:18:23.83476-05:00"}
{"id":"mantle-4gz.1","title":"Backend Migration: NestJS → Hono","description":"Replace NestJS backend with Hono, preserving all infrastructure integrations.\n\nTarget Structure:\n- src/index.ts - Hono app entry point\n- src/routes/health.ts - Health check endpoints\n- src/lib/db/client.ts - Drizzle connection singleton\n- src/lib/supabase/client.ts - Supabase client\n- src/lib/trigger/config.ts - Trigger.dev configuration\n\nAcceptance Criteria:\n- GET /api returns { message, version }\n- GET /api/health returns full health status\n- GET /api/health/live returns { status: 'ok' }\n- GET /api/health/ready returns { ready: boolean }\n- Database connection pool working\n- Supabase client functional\n- Trigger.dev SDK configured","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-22T17:19:48.703109-05:00","updated_at":"2025-12-23T20:18:23.705872-05:00","closed_at":"2025-12-23T20:18:23.705874-05:00","dependencies":[{"issue_id":"mantle-4gz.1","depends_on_id":"mantle-4gz","type":"parent-child","created_at":"2025-12-22T17:19:48.70341-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.1","title":"Set up Hono project structure","description":"Initialize Hono project in apps/api/ replacing NestJS.\n\nSteps:\n1. Delete existing NestJS files (preserve lib/db/*)\n2. Create new package.json with Hono dependencies\n3. Set up TypeScript configuration\n4. Create entry point with basic Hono app\n\nFiles to Delete:\n- apps/api/src/main.ts, app.module.ts, app.controller.ts, app.service.ts\n- apps/api/src/drizzle/*.ts, supabase/*.ts, trigger/*.ts, health/*.ts\n- apps/api/nest-cli.json\n\nFiles to Preserve:\n- apps/api/src/lib/db/schema.ts, types.ts, index.ts\n- apps/api/drizzle.config.ts\n\nDependencies to Add: hono, @hono/node-server, @hono/zod-validator, zod\nDependencies to Remove: @nestjs/*, class-transformer, class-validator, reflect-metadata, rxjs","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:27.132028-05:00","updated_at":"2025-12-22T17:27:51.289648-05:00","closed_at":"2025-12-22T17:27:51.289651-05:00","labels":["backend","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.1.1","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:27.132356-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.2","title":"Implement database middleware (Drizzle integration)","description":"Port DrizzleService to Hono middleware/context pattern.\n\nCreate:\n- src/lib/db/client.ts - Singleton postgres connection with pooling (max: 10, idle: 20s)\n- healthCheck() function for health endpoints\n- closeDb() for graceful shutdown\n\nPattern: Use module-level singleton instead of NestJS DI","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:27.299758-05:00","updated_at":"2025-12-22T17:30:35.432897-05:00","closed_at":"2025-12-22T17:30:35.432899-05:00","labels":["backend","database","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.1.2","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:27.300062-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.3","title":"Implement Supabase client middleware","description":"Port SupabaseService to Hono middleware pattern.\n\nCreate: src/lib/supabase/client.ts\n- Singleton pattern for Supabase client\n- Use service role key for server-side access\n- Disabled autoRefreshToken and persistSession","status":"closed","priority":0,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-22T17:20:27.473956-05:00","updated_at":"2025-12-22T17:31:19.070136-05:00","closed_at":"2025-12-22T17:31:19.070138-05:00","labels":["backend","phase:1","supabase"],"dependencies":[{"issue_id":"mantle-4gz.1.3","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:27.474231-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.4","title":"Port Trigger.dev integration","description":"Port TriggerService configuration to Hono pattern.\n\nCreate: src/lib/trigger/config.ts\n- Configure Trigger.dev SDK at app startup\n- Export configuration status for health checks\n- Warn (don't crash) if TRIGGER_SECRET_KEY missing","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-22T17:20:27.644519-05:00","updated_at":"2025-12-22T17:32:19.030527-05:00","closed_at":"2025-12-22T17:32:19.030528-05:00","labels":["backend","phase:1","trigger-dev"],"dependencies":[{"issue_id":"mantle-4gz.1.4","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:27.644792-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.5","title":"Create health check routes","description":"Port HealthController to Hono routes.\n\nCreate: src/routes/health.ts\n- GET /api/health - Full status with services\n- GET /api/health/live - Liveness probe (always ok)\n- GET /api/health/ready - Readiness probe (checks DB)\n\nResponse shape:\n{\n  status: 'healthy' | 'degraded' | 'unhealthy',\n  timestamp: string,\n  version: string,\n  services: { database: {...}, trigger: {...} }\n}","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:27.81835-05:00","updated_at":"2025-12-22T22:13:24.274916-05:00","closed_at":"2025-12-22T22:13:24.274933-05:00","labels":["backend","critical-path","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.1.5","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:27.818621-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.6","title":"Configure CORS and request validation","description":"Set up CORS middleware and Zod validation.\n\nConfiguration:\n- CORS: origin from CORS_ORIGIN env, credentials: true\n- Zod: Replace class-validator with @hono/zod-validator\n- Global prefix: /api via app.basePath('/api')","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:27.993625-05:00","updated_at":"2025-12-23T20:18:32.122376-05:00","closed_at":"2025-12-23T20:18:32.122378-05:00","labels":["backend","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.1.6","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:27.993939-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.1.7","title":"Clean up and verify backend","description":"Final cleanup, testing, and verification of Hono backend.\n\nCleanup:\n- Remove unused NestJS dependencies\n- Remove NestJS-specific config files\n- Update .eslintrc for new structure\n\nVerification:\n- bun run dev starts on port 3001\n- All health endpoints respond correctly\n- TypeScript compiles cleanly\n- Build produces valid output","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:28.175835-05:00","updated_at":"2025-12-23T20:18:32.189445-05:00","closed_at":"2025-12-23T20:18:32.189447-05:00","labels":["backend","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.1.7","depends_on_id":"mantle-4gz.1","type":"parent-child","created_at":"2025-12-22T17:20:28.176109-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.2","title":"Frontend Migration: Next.js → TanStack Router + Vite","description":"Replace Next.js frontend with TanStack Router + Vite SPA.\n\nTarget Structure:\n- src/main.tsx - React entry point\n- src/routes/__root.tsx - Root layout\n- src/routes/index.tsx - Landing page\n- src/styles/index.css - Tailwind + CSS variables\n- src/lib/supabase.ts - Supabase client\n\nAcceptance Criteria:\n- Landing page renders with same content\n- Tailwind styles working\n- Dark mode CSS variables preserved\n- Supabase client available\n- Path aliases (@/) working","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-22T17:19:48.874405-05:00","updated_at":"2025-12-23T20:18:23.771061-05:00","closed_at":"2025-12-23T20:18:23.771064-05:00","dependencies":[{"issue_id":"mantle-4gz.2","depends_on_id":"mantle-4gz","type":"parent-child","created_at":"2025-12-22T17:19:48.874668-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.2.1","title":"Set up Vite + React project","description":"Initialize Vite project with React and TypeScript.\n\nFiles to Delete:\n- apps/web/app/ (entire directory)\n- apps/web/next.config.mjs, next-env.d.ts\n\nFiles to Create:\n- apps/web/vite.config.ts\n- apps/web/index.html\n- apps/web/src/main.tsx\n- apps/web/src/vite-env.d.ts\n\nDependencies to Add: vite, @vitejs/plugin-react, @tanstack/react-router, @tanstack/router-vite-plugin\nDependencies to Remove: next\n\nScripts: dev → vite --port 3000, build → tsc \u0026\u0026 vite build","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:56.343094-05:00","updated_at":"2025-12-23T20:18:32.254298-05:00","closed_at":"2025-12-23T20:18:32.2543-05:00","labels":["frontend","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.2.1","depends_on_id":"mantle-4gz.2","type":"parent-child","created_at":"2025-12-22T17:20:56.343387-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.2.2","title":"Configure TanStack Router","description":"Set up TanStack Router with file-based routing.\n\nTarget Structure:\nsrc/routes/__root.tsx - Root layout\nsrc/routes/index.tsx - Home page (/)\nsrc/routeTree.gen.ts - Auto-generated\n\nVite Config: Add TanStackRouterVite() plugin\nPattern: Use createRootRoute and createFileRoute","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:56.506307-05:00","updated_at":"2025-12-23T20:18:32.318856-05:00","closed_at":"2025-12-23T20:18:32.318857-05:00","labels":["frontend","phase:1","routing"],"dependencies":[{"issue_id":"mantle-4gz.2.2","depends_on_id":"mantle-4gz.2","type":"parent-child","created_at":"2025-12-22T17:20:56.506625-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.2.3","title":"Port Tailwind and styles","description":"Configure Tailwind CSS and port existing styles.\n\nMove: globals.css → src/styles/index.css\nUpdate: tailwind.config.ts content paths for Vite structure\nKeep: CSS variables for light/dark mode, body gradient","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-22T17:20:56.664414-05:00","updated_at":"2025-12-23T20:18:32.383947-05:00","closed_at":"2025-12-23T20:18:32.383948-05:00","labels":["frontend","phase:1","styling"],"dependencies":[{"issue_id":"mantle-4gz.2.3","depends_on_id":"mantle-4gz.2","type":"parent-child","created_at":"2025-12-22T17:20:56.664703-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.2.4","title":"Create root layout and landing page","description":"Port Next.js layout and landing page to TanStack Router.\n\nRoot Layout (__root.tsx):\n- Inter font via @fontsource/inter\n- HTML structure with Outlet\n\nIndex Page (index.tsx):\n- Same content: 'Mantle' heading, 'Reasoning Substrate - Coming Soon'\n- Same Tailwind classes for centering\n\nMeta Tags: Add to index.html","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:20:56.821923-05:00","updated_at":"2025-12-23T20:18:32.44853-05:00","closed_at":"2025-12-23T20:18:32.448532-05:00","labels":["frontend","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.2.4","depends_on_id":"mantle-4gz.2","type":"parent-child","created_at":"2025-12-22T17:20:56.822209-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.2.5","title":"Set up Supabase client","description":"Configure Supabase client for browser use.\n\nCreate: src/lib/supabase.ts\n- Use @supabase/supabase-js directly (no SSR needed)\n- Use VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY env vars\n\nRemove: @supabase/ssr dependency (not needed for SPA)","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-22T17:20:56.982236-05:00","updated_at":"2025-12-23T20:18:32.51281-05:00","closed_at":"2025-12-23T20:18:32.512812-05:00","labels":["frontend","phase:1","supabase"],"dependencies":[{"issue_id":"mantle-4gz.2.5","depends_on_id":"mantle-4gz.2","type":"parent-child","created_at":"2025-12-22T17:20:56.982531-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.3","title":"Monorepo Updates","description":"Update Turborepo configuration and documentation for new frameworks.\n\nScope:\n- turbo.json build outputs\n- CLAUDE.md tech stack and commands\n- Environment variable templates","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T17:19:49.028596-05:00","updated_at":"2025-12-23T20:18:39.067395-05:00","closed_at":"2025-12-23T20:18:39.067396-05:00","dependencies":[{"issue_id":"mantle-4gz.3","depends_on_id":"mantle-4gz","type":"parent-child","created_at":"2025-12-22T17:19:49.028851-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.3.1","title":"Update Turborepo configuration","description":"Update turbo.json for Hono and Vite build outputs.\n\nChanges:\n- outputs: ['dist/**'] for both apps (remove .next/**)\n\nVerify:\n- turbo build caches correctly\n- turbo dev runs both apps\n- Outputs properly cached/invalidated","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-22T17:21:08.296391-05:00","updated_at":"2025-12-23T20:18:39.132672-05:00","closed_at":"2025-12-23T20:18:39.132674-05:00","labels":["infra","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.3.1","depends_on_id":"mantle-4gz.3","type":"parent-child","created_at":"2025-12-22T17:21:08.296692-05:00","created_by":"daemon"}]}
{"id":"mantle-4gz.3.2","title":"Update documentation (CLAUDE.md)","description":"Update CLAUDE.md for new tech stack.\n\nUpdates:\n- Tech Stack: Add Hono, TanStack Router, Vite\n- Quick Start: Update commands for turbo/bun\n- File Organization: Show new monorepo structure\n- Environment Variables: VITE_* instead of NEXT_PUBLIC_*\n- Common Tasks: NestJS module → Hono routes","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-22T17:21:08.449123-05:00","updated_at":"2025-12-23T20:18:39.198115-05:00","closed_at":"2025-12-23T20:18:39.198116-05:00","labels":["docs","phase:1"],"dependencies":[{"issue_id":"mantle-4gz.3.2","depends_on_id":"mantle-4gz.3","type":"parent-child","created_at":"2025-12-22T17:21:08.449394-05:00","created_by":"daemon"}]}
{"id":"mantle-4n3","title":"Build PR analysis history UI","description":"Show PR analysis history.\n\n## PRD References\n- Task 5b.13\n\n## Acceptance Criteria\n- [ ] List of analyzed PRs\n- [ ] Violation count per PR\n- [ ] Click through to details\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/repos/[id]/prs/page.tsx\n- components/prs/pr-list.tsx\n\n## Effort\n3 hours","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-20T20:40:49.372929-05:00","updated_at":"2025-12-20T20:40:49.372929-05:00"}
{"id":"mantle-4pl","title":"Implement Zod validation for LLM output","description":"Validate LLM responses with Zod schemas.\n\n## PRD References\n- Task 3.3\n\n## Acceptance Criteria\n- [ ] Zod schema for extraction response\n- [ ] Parse and validate JSON output\n- [ ] Handle malformed responses\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/schemas.ts\n- lib/extraction/parse.ts\n\n### Dependencies\n- zod\n\n### Notes\nCritical for reliability.\nReturn partial results if some patterns valid.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:20.972888-05:00","updated_at":"2025-12-20T20:39:20.972888-05:00","dependencies":[{"issue_id":"mantle-4pl","depends_on_id":"mantle-c6l","type":"parent-child","created_at":"2025-12-20T20:39:21.042821-05:00","created_by":"daemon"},{"issue_id":"mantle-4pl","depends_on_id":"mantle-9w4","type":"blocks","created_at":"2025-12-20T20:39:21.105681-05:00","created_by":"daemon"}]}
{"id":"mantle-4s4","title":"Connect Trigger.dev for background jobs","description":"Set up Trigger.dev project, configure environment, create first test job.\n\n## PRD References\n- Task 1.3\n- D7 (Trigger.dev)\n\n## Acceptance Criteria\n- [ ] Trigger.dev project created\n- [ ] SDK configured in Next.js\n- [ ] Test job runs successfully\n- [ ] Dev server dashboard accessible\n\n## Implementation Details\n\n### Files to Create/Modify\n- trigger.config.ts\n- jobs/test-job.ts\n\n### Dependencies\n- @trigger.dev/sdk\n\n### Notes\nWill need Trigger.dev API key in both Vercel and local.\n\n## Effort\n2 hours","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:15.835523-05:00","updated_at":"2025-12-20T21:05:03.25129-05:00","closed_at":"2025-12-20T21:05:03.251291-05:00","labels":["phase:1","trigger-dev"],"dependencies":[{"issue_id":"mantle-4s4","depends_on_id":"mantle-81h","type":"parent-child","created_at":"2025-12-20T20:39:15.898797-05:00","created_by":"daemon"}]}
{"id":"mantle-4x5","title":"Status check for pending evolution reviews","description":"Block merge for canonical modifications.\n\n## PRD References\n- Task 5b.12\n- D27 (Evolution)\n\n## Acceptance Criteria\n- [ ] Canonical modified → pending state\n- [ ] Non-canonical → success with note\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/status-check.ts\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:49.287379-05:00","updated_at":"2025-12-20T20:40:49.287379-05:00"}
{"id":"mantle-57w","title":"Basic settings UI","description":"Settings for notifications and repo management.\n\n## PRD References\n- Task 6.8\n\n## Acceptance Criteria\n- [ ] Notification preferences\n- [ ] Repo management (disconnect)\n- [ ] User profile\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/settings/page.tsx\n- app/settings/repos/page.tsx\n\n## Effort\n3 hours","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-20T20:40:50.573384-05:00","updated_at":"2025-12-20T20:40:50.573384-05:00"}
{"id":"mantle-5ip","title":"Context file setup UI (Workflow 9)","description":"UI for selecting formats and customizing paths.\n\n## PRD References\n- Task 5a.2\n\n## Acceptance Criteria\n- [ ] Format selection (Claude, Cursor)\n- [ ] Path customization\n- [ ] Sync toggle\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/repos/[id]/context/setup/page.tsx\n- components/context/format-selector.tsx\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:47.328757-05:00","updated_at":"2025-12-20T20:40:47.328757-05:00"}
{"id":"mantle-5iu","title":"Manual download/copy UI for context files","description":"Download or copy generated content.\n\n## PRD References\n- Task 5a.8\n\n## Acceptance Criteria\n- [ ] Download generated file\n- [ ] Copy to clipboard\n- [ ] Preview in modal\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/context/download-modal.tsx\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:47.904743-05:00","updated_at":"2025-12-20T20:40:47.904743-05:00"}
{"id":"mantle-5lg","title":"Extract patterns with multi-dimensional confidence scoring","description":"LLM-powered pattern extraction with 4-dimension confidence scoring,\nhealth signals, tier derivation, and violation detection module.\n\n## PRD References\n- Section 6.2 Phase 3\n- D8 (Claude Sonnet 4.5)\n- D10 (1M context)\n- D11 (Multi-dimensional confidence)\n- D20, D23, D24\n\n## Effort\n10 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:11.833289-05:00","updated_at":"2025-12-20T20:39:11.833289-05:00"}
{"id":"mantle-61c","title":"Filesystem pattern extraction","description":"Extract file-naming and file-structure patterns.\n\n## PRD References\n- Task 3.16-3.19\n- D31 (Filesystem patterns)\n- D34 (2-dimension confidence)\n\n## Acceptance Criteria\n- [ ] File tree analyzed for patterns\n- [ ] file-naming and file-structure patterns extracted\n- [ ] 2-dimension confidence (Evidence + Adoption)","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.457482-05:00","updated_at":"2025-12-20T20:39:13.457482-05:00","dependencies":[{"issue_id":"mantle-61c","depends_on_id":"mantle-5lg","type":"parent-child","created_at":"2025-12-20T20:39:13.520707-05:00","created_by":"daemon"}]}
{"id":"mantle-6ar","title":"Tech stack documentation updated for D37 migration","description":"Updated PRD and project spec to reflect D37 framework migration (Hono + Vite + TanStack Router + tRPC + Base UI + Tailwind v4 + Drizzle ORM). Closed all migration beads (mantle-4gz epic and sub-tasks).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T20:19:13.335461-05:00","updated_at":"2025-12-23T20:19:17.251674-05:00","closed_at":"2025-12-23T20:19:17.251676-05:00","labels":["docs"]}
{"id":"mantle-6at","title":"Evidence re-capture for authoritative patterns","description":"Re-analyze evidence files to refresh line numbers.\n\n## PRD References\n- Task 6.5a\n\n## Acceptance Criteria\n- [ ] Evidence files re-analyzed\n- [ ] startLine, endLine, snippet updated\n- [ ] capturedAtSha updated\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/evidence-recapture.ts\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:50.40328-05:00","updated_at":"2025-12-20T20:40:50.40328-05:00"}
{"id":"mantle-6c2","title":"Implement insight generation with json-rules-engine","description":"Generate contextual insights using rules engine.\n\n## PRD References\n- Task 3.11\n- D24 (json-rules-engine)\n\n## Acceptance Criteria\n- [ ] json-rules-engine installed and configured\n- [ ] 15 starter rules implemented\n- [ ] Highest-priority matching insight returned\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/insights/engine.ts\n- lib/extraction/insights/rules.ts\n- lib/extraction/insights/facts.ts\n\n### Dependencies\n- json-rules-engine\n\n### Notes\nPer D24: 15 rules priority-ordered.\nStore insight and suggestedActions.\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:22.870526-05:00","updated_at":"2025-12-20T20:39:22.870526-05:00","dependencies":[{"issue_id":"mantle-6c2","depends_on_id":"mantle-1an","type":"parent-child","created_at":"2025-12-20T20:39:22.938556-05:00","created_by":"daemon"},{"issue_id":"mantle-6c2","depends_on_id":"mantle-93p","type":"blocks","created_at":"2025-12-20T20:39:23.010042-05:00","created_by":"daemon"},{"issue_id":"mantle-6c2","depends_on_id":"mantle-2ou","type":"blocks","created_at":"2025-12-20T20:39:23.07598-05:00","created_by":"daemon"}]}
{"id":"mantle-6hx","title":"Author username lookup via GitHub API","description":"Resolve commit author emails to GitHub usernames.\n\n## PRD References\n- Task 2.9\n\n## Acceptance Criteria\n- [ ] Email → username resolution\n- [ ] Caching to avoid repeated lookups\n- [ ] Handle unresolvable emails\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/authors.ts\n\n### Dependencies\n- @octokit/rest\n\n### Notes\nUse Search API: /search/users?q=email\nCache results in database.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:19.321338-05:00","updated_at":"2025-12-20T20:39:19.321338-05:00","dependencies":[{"issue_id":"mantle-6hx","depends_on_id":"mantle-v22","type":"parent-child","created_at":"2025-12-20T20:39:19.386298-05:00","created_by":"daemon"},{"issue_id":"mantle-6hx","depends_on_id":"mantle-vdf","type":"blocks","created_at":"2025-12-20T20:39:19.448802-05:00","created_by":"daemon"}]}
{"id":"mantle-75j","title":"Build 'View all violations' modal for backtest results","description":"Modal listing all BacktestViolation records.\n\n## PRD References\n- Task 4.10a\n\n## Acceptance Criteria\n- [ ] List all backtest violations\n- [ ] Links to original PRs\n- [ ] File and line information\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/backtest-detail-modal.tsx\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.551385-05:00","updated_at":"2025-12-20T20:40:46.551385-05:00"}
{"id":"mantle-77o","title":"Add extraction progress to Repo with Realtime events","description":"Update extractionStatus with Realtime events.\n\n## PRD References\n- Task 3.14\n\n## Acceptance Criteria\n- [ ] extractionStatus updated: pending → extracting → extracted/failed\n- [ ] Supabase Realtime events emitted\n- [ ] UI can subscribe for live updates\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/repos.ts\n\n### Dependencies\nNone\n\n### Notes\nSame pattern as ingestion progress.\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:39:23.582871-05:00","updated_at":"2025-12-20T20:39:23.582871-05:00","dependencies":[{"issue_id":"mantle-77o","depends_on_id":"mantle-2on","type":"parent-child","created_at":"2025-12-20T20:39:23.645839-05:00","created_by":"daemon"},{"issue_id":"mantle-77o","depends_on_id":"mantle-8hk","type":"blocks","created_at":"2025-12-20T20:39:23.710962-05:00","created_by":"daemon"}]}
{"id":"mantle-7il","title":"Build repo progress page with Realtime updates","description":"Live progress during ingestion and extraction.\n\n## PRD References\n- Task 4.12\n\n## Acceptance Criteria\n- [ ] Subscribe to repos UPDATE events\n- [ ] Subscribe to patterns INSERT events\n- [ ] Animate pattern list on completion\n- [ ] Unsubscribe on unmount\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/repos/[id]/progress/page.tsx\n- hooks/use-extraction-progress.ts\n\n### Notes\nPer D16: Batch completion, not streaming.\n\n## Effort\n4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.719414-05:00","updated_at":"2025-12-20T20:40:46.719414-05:00"}
{"id":"mantle-7qi","title":"Fetch file contents with batching","description":"Fetch content for all code files with rate limit handling.\n\n## PRD References\n- Task 2.2\n\n## Acceptance Criteria\n- [ ] File content fetched via GitHub API\n- [ ] Batching to avoid rate limits\n- [ ] Binary files skipped\n- [ ] Large files handled appropriately\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/content.ts\n\n### Dependencies\n- @octokit/rest\n\n### Notes\nUse GET /repos/{owner}/{repo}/contents/{path}\nContent is base64 encoded.\nHandle files \u003e1MB via Git Blobs API.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:17.66972-05:00","updated_at":"2025-12-20T20:39:17.66972-05:00","dependencies":[{"issue_id":"mantle-7qi","depends_on_id":"mantle-457","type":"parent-child","created_at":"2025-12-20T20:39:17.735092-05:00","created_by":"daemon"},{"issue_id":"mantle-7qi","depends_on_id":"mantle-0yn","type":"blocks","created_at":"2025-12-20T20:39:17.798859-05:00","created_by":"daemon"}]}
{"id":"mantle-7xl","title":"Fetch git commit history (2-year lookback)","description":"Fetch commit history for establishment dimension.\n\n## PRD References\n- Task 2.7\n- D11 (Establishment)\n\n## Acceptance Criteria\n- [ ] 2-year commit history fetched\n- [ ] Author, date, SHA captured\n- [ ] Paginated for large histories\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/commits.ts\n\n### Dependencies\n- @octokit/rest\n\n### Notes\nPer D11: Establishment uses pattern age from git history.\n2-year lookback sufficient for most repos.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:18.804375-05:00","updated_at":"2025-12-20T20:39:18.804375-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-7xl","depends_on_id":"mantle-v22","type":"parent-child","created_at":"2025-12-20T20:39:18.868633-05:00","created_by":"daemon"},{"issue_id":"mantle-7xl","depends_on_id":"mantle-0yn","type":"blocks","created_at":"2025-12-20T20:39:18.930821-05:00","created_by":"daemon"}]}
{"id":"mantle-80n","title":"Add lastError field to Repo and PullRequest","description":"Store error messages for debugging.\n\n## PRD References\n- Task 6.1a\n\n## Acceptance Criteria\n- [ ] lastError on Repo and PullRequest\n- [ ] Cleared on successful operation\n\n## Implementation Details\n\n### Files to Create/Modify\n- supabase/migrations/002_error_fields.sql\n\n## Effort\n1 hour","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:49.717168-05:00","updated_at":"2025-12-20T20:40:49.717168-05:00"}
{"id":"mantle-81h","title":"Project setup and infrastructure","description":"Initialize Next.js, Supabase, and Trigger.dev infrastructure.\n\n## PRD References\n- Task 1.1, 1.2, 1.3\n\n## Acceptance Criteria\n- [ ] Next.js 14+ with App Router deployed to Vercel\n- [ ] Supabase project connected with auth configured\n- [ ] Trigger.dev connected for background jobs","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:12.259726-05:00","updated_at":"2025-12-20T20:39:12.259726-05:00","dependencies":[{"issue_id":"mantle-81h","depends_on_id":"mantle-gd2","type":"parent-child","created_at":"2025-12-20T20:39:12.324374-05:00","created_by":"daemon"}]}
{"id":"mantle-820","title":"epic","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T17:18:41.629247-05:00","updated_at":"2025-12-22T17:21:15.092496-05:00","closed_at":"2025-12-22T17:21:15.092498-05:00"}
{"id":"mantle-8ak","title":"Comprehensive error handling and retry logic","description":"Handle errors gracefully across jobs and UI.\n\n## PRD References\n- Task 6.1a-6.1f, 6.2\n\n## Acceptance Criteria\n- [ ] Failures captured with error messages\n- [ ] Retry with exponential backoff\n- [ ] UI shows failure states with retry","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:15.084883-05:00","updated_at":"2025-12-20T20:39:15.084883-05:00","dependencies":[{"issue_id":"mantle-8ak","depends_on_id":"mantle-31q","type":"parent-child","created_at":"2025-12-20T20:39:15.148196-05:00","created_by":"daemon"}]}
{"id":"mantle-8b4","title":"Create core database schema","description":"Create all tables from Section 2.4 data model with RLS policies.\n\n## PRD References\n- Task 1.6\n- Section 2.4 (Data Model)\n- D5 (Multi-repo from day 1)\n\n## Acceptance Criteria\n- [ ] All entity tables created (users, repos, patterns, etc.)\n- [ ] RLS policies for all tables\n- [ ] Foreign keys with proper cascades\n- [ ] TypeScript types generated\n\n## Implementation Details\n\n### Files to Create/Modify\n- supabase/migrations/001_core_schema.sql\n- lib/db/types.ts\n\n### Dependencies\n- supabase\n\n### Notes\nPer D5: repoId is FK on all pattern-related tables.\nUse CASCADE for pattern → evidence, pattern → backtest_violations.\n\n## Effort\n4 hours","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:16.404687-05:00","updated_at":"2025-12-20T22:21:09.560418-05:00","closed_at":"2025-12-20T22:21:09.56042-05:00","dependencies":[{"issue_id":"mantle-8b4","depends_on_id":"mantle-e3r","type":"parent-child","created_at":"2025-12-20T20:39:16.465971-05:00","created_by":"daemon"},{"issue_id":"mantle-8b4","depends_on_id":"mantle-nmz","type":"blocks","created_at":"2025-12-20T20:39:16.529401-05:00","created_by":"daemon"}]}
{"id":"mantle-8hk","title":"Create Trigger.dev extractPatterns job","description":"Background job that runs pattern extraction.\n\n## PRD References\n- Task 3.4\n- D16 (Batch results)\n\n## Acceptance Criteria\n- [ ] Job triggered after ingestion\n- [ ] Updates extractionStatus through states\n- [ ] Stores all patterns on completion\n- [ ] Retries with exponential backoff\n\n## Implementation Details\n\n### Files to Create/Modify\n- jobs/extract-patterns.ts\n\n### Dependencies\n- @trigger.dev/sdk\n\n### Notes\nPer D16: Batch completion, not streaming.\nStatus: pending → extracting → extracted/failed\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:21.192271-05:00","updated_at":"2025-12-20T20:39:21.192271-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-8hk","depends_on_id":"mantle-c6l","type":"parent-child","created_at":"2025-12-20T20:39:21.257066-05:00","created_by":"daemon"},{"issue_id":"mantle-8hk","depends_on_id":"mantle-4pl","type":"blocks","created_at":"2025-12-20T20:39:21.321135-05:00","created_by":"daemon"},{"issue_id":"mantle-8hk","depends_on_id":"mantle-qh0","type":"blocks","created_at":"2025-12-20T20:39:21.384291-05:00","created_by":"daemon"}]}
{"id":"mantle-8y7","title":"Configure environment variables for all services","description":"Set up env vars in Vercel, Trigger.dev, and local dev.\n\n## PRD References\n- Task 1.9\n- D15 (Private key storage)\n\n## Acceptance Criteria\n- [ ] All env vars documented\n- [ ] Vercel environment configured\n- [ ] Trigger.dev environment configured\n- [ ] Local .env.local template\n\n## Implementation Details\n\n### Files to Create/Modify\n- .env.local.example\n- docs/environment-setup.md\n\n### Dependencies\nNone\n\n### Notes\nRequired vars: SUPABASE_*, GITHUB_APP_*, ANTHROPIC_API_KEY, TRIGGER_*.\nPrivate key as base64-encoded string.\n\n## Effort\n1 hour","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:17.123104-05:00","updated_at":"2025-12-20T21:12:41.815993-05:00","closed_at":"2025-12-20T21:12:41.815995-05:00","dependencies":[{"issue_id":"mantle-8y7","depends_on_id":"mantle-81h","type":"parent-child","created_at":"2025-12-20T20:39:17.18545-05:00","created_by":"daemon"},{"issue_id":"mantle-8y7","depends_on_id":"mantle-4gm","type":"blocks","created_at":"2025-12-20T20:39:17.248798-05:00","created_by":"daemon"},{"issue_id":"mantle-8y7","depends_on_id":"mantle-nmz","type":"blocks","created_at":"2025-12-20T20:39:17.311339-05:00","created_by":"daemon"},{"issue_id":"mantle-8y7","depends_on_id":"mantle-4s4","type":"blocks","created_at":"2025-12-20T20:39:17.374976-05:00","created_by":"daemon"}]}
{"id":"mantle-937","title":"Implement Promote, Reject, Defer actions","description":"Core action handlers for all three validation workflows.\n\n## PRD References\n- Task 4.3\n- D18 (Rejection flow)\n- D19 (Severity)\n\n## Acceptance Criteria\n- [ ] Promote opens modal with configuration\n- [ ] Reject opens modal with optional reason\n- [ ] Defer is instant, increments deferCount\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/actions/promote-modal.tsx\n- components/patterns/actions/reject-modal.tsx\n- lib/db/patterns.ts\n\n### Notes\nPer D18: Fast path - press r, hit Enter.\nPer D19: Severity dropdown, default 'warning'.\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:45.701614-05:00","updated_at":"2025-12-20T20:40:45.701614-05:00"}
{"id":"mantle-93f","title":"Filesystem pattern extraction prompt","description":"Design prompt for file-naming and file-structure patterns.\n\n## PRD References\n- Task 3.17\n- D31 (Filesystem patterns)\n\n## Acceptance Criteria\n- [ ] Prompt identifies file-naming patterns with globs\n- [ ] Prompt identifies file-structure patterns\n- [ ] Anti-pattern examples extracted\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/prompts/filesystem.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D31: file-naming and file-structure only for MVP.\nInclude globPattern and antiPatternExamples.\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:24.491702-05:00","updated_at":"2025-12-20T20:39:24.491702-05:00","dependencies":[{"issue_id":"mantle-93f","depends_on_id":"mantle-61c","type":"parent-child","created_at":"2025-12-20T20:39:24.554044-05:00","created_by":"daemon"},{"issue_id":"mantle-93f","depends_on_id":"mantle-3bw","type":"blocks","created_at":"2025-12-20T20:39:24.616169-05:00","created_by":"daemon"}]}
{"id":"mantle-93p","title":"Derive confidence tier from dimensions","description":"Apply threshold logic to derive tier.\n\n## PRD References\n- Task 3.10\n- D11 (Tier definitions)\n\n## Acceptance Criteria\n- [ ] Tier derived: strong/emerging/moderate/weak/legacy\n- [ ] Full PatternConfidence stored\n- [ ] Weak tier handles single author correctly\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/confidence/tier.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D11: strong=5+ instances, 3+ authors, established\nPer audit: singleAuthorMaxInstances=5\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:22.596407-05:00","updated_at":"2025-12-20T20:39:22.596407-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-93p","depends_on_id":"mantle-1an","type":"parent-child","created_at":"2025-12-20T20:39:22.661237-05:00","created_by":"daemon"},{"issue_id":"mantle-93p","depends_on_id":"mantle-k22","type":"blocks","created_at":"2025-12-20T20:39:22.723671-05:00","created_by":"daemon"},{"issue_id":"mantle-93p","depends_on_id":"mantle-1am","type":"blocks","created_at":"2025-12-20T20:39:22.786511-05:00","created_by":"daemon"}]}
{"id":"mantle-96d","title":"File naming violation detection via regex","description":"Match new file paths against globs.\n\n## PRD References\n- Task 5b.4\n- D35 (File-naming enforcement)\n\n## Acceptance Criteria\n- [ ] New files checked against globs\n- [ ] Only prReview=true patterns\n- [ ] Violations created\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/enforcement/file-naming.ts\n\n### Dependencies\n- minimatch\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:48.460182-05:00","updated_at":"2025-12-20T20:40:48.460182-05:00"}
{"id":"mantle-97n","title":"Filesystem pattern card UI with 2 confidence pills","description":"Display filesystem patterns with 2-dimension confidence.\n\n## PRD References\n- Task 4.15\n- D34 (2-dimension confidence)\n\n## Acceptance Criteria\n- [ ] 2 confidence pills (Evidence, Adoption)\n- [ ] Path examples and glob pattern\n- [ ] Type badge\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/filesystem-card.tsx\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.977973-05:00","updated_at":"2025-12-20T20:40:46.977973-05:00"}
{"id":"mantle-9au","title":"Store ingested files in database","description":"Store file paths and content for extraction and autocomplete.\n\n## PRD References\n- Task 2.3\n\n## Acceptance Criteria\n- [ ] Files stored with path and content\n- [ ] Upsert logic for re-ingestion\n- [ ] Metadata (size, type) captured\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/files.ts\n\n### Dependencies\n- @supabase/supabase-js\n\n### Notes\nContent stored for extraction.\nPaths available for evidence autocomplete.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:17.884592-05:00","updated_at":"2025-12-20T20:39:17.884592-05:00","dependencies":[{"issue_id":"mantle-9au","depends_on_id":"mantle-457","type":"parent-child","created_at":"2025-12-20T20:39:17.949093-05:00","created_by":"daemon"},{"issue_id":"mantle-9au","depends_on_id":"mantle-7qi","type":"blocks","created_at":"2025-12-20T20:39:18.012996-05:00","created_by":"daemon"}]}
{"id":"mantle-9ju","title":"Detect pattern evolution in PR diffs","description":"Check if diff modifies evidence files.\n\n## PRD References\n- Task 5b.5\n- D27 (Evolution detection)\n\n## Acceptance Criteria\n- [ ] Changed files compared against evidence\n- [ ] PatternEvolutionRequest created\n- [ ] isCanonical flag set\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/enforcement/evolution-detect.ts\n- lib/db/pattern-evolution.ts\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:48.546851-05:00","updated_at":"2025-12-20T20:40:48.546851-05:00","labels":["critical-path"]}
{"id":"mantle-9u9","title":"PR history and backtest data","description":"Fetch recent PRs and store diffs for backtest.\n\n## PRD References\n- Task 2.10, 2.11, 2.12, 2.13, 2.14\n- D28 (Supabase Storage for diffs)\n- D21 (Evidence staleness)\n\n## Acceptance Criteria\n- [ ] Last 30 merged PRs fetched\n- [ ] Diffs stored in Supabase Storage\n- [ ] Token counting for extraction limits\n- [ ] repo_files table for autocomplete\n- [ ] Stale evidence detection","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.009448-05:00","updated_at":"2025-12-20T20:39:13.009448-05:00","dependencies":[{"issue_id":"mantle-9u9","depends_on_id":"mantle-w6l","type":"parent-child","created_at":"2025-12-20T20:39:13.074607-05:00","created_by":"daemon"}]}
{"id":"mantle-9w0","title":"Extraction error handling with UI feedback","description":"Catch LLM errors, show retry button.\n\n## PRD References\n- Task 6.1b\n\n## Acceptance Criteria\n- [ ] LLM errors caught and logged\n- [ ] extractionStatus set to 'failed'\n- [ ] UI shows retry\n\n## Implementation Details\n\n### Files to Create/Modify\n- jobs/extract-patterns.ts\n- components/repos/extraction-error.tsx\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:49.802039-05:00","updated_at":"2025-12-20T20:40:49.802039-05:00"}
{"id":"mantle-9w4","title":"Build extraction pipeline with Claude API","description":"Implement Claude Sonnet 4.5 API integration for extraction.\n\n## PRD References\n- Task 3.2\n- D8 (Claude Sonnet 4.5)\n- D10 (1M context beta header)\n\n## Acceptance Criteria\n- [ ] Claude client configured with beta header\n- [ ] Pipeline handles full repo content\n- [ ] Response parsed and validated\n- [ ] Errors handled gracefully\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/anthropic/client.ts\n- lib/extraction/pipeline.ts\n\n### Dependencies\n- @anthropic-ai/sdk\n\n### Notes\nPer D8: Model claude-sonnet-4-5-20250929\nPer D10: Use anthropic-beta header for 1M context\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:20.755783-05:00","updated_at":"2025-12-20T20:39:20.755783-05:00","labels":["anthropic,claude"],"dependencies":[{"issue_id":"mantle-9w4","depends_on_id":"mantle-c6l","type":"parent-child","created_at":"2025-12-20T20:39:20.820234-05:00","created_by":"daemon"},{"issue_id":"mantle-9w4","depends_on_id":"mantle-3eb","type":"blocks","created_at":"2025-12-20T20:39:20.884057-05:00","created_by":"daemon"}]}
{"id":"mantle-aba","title":"Post GitHub status check based on violations","description":"Update commit status check.\n\n## PRD References\n- Task 5b.11\n\n## Acceptance Criteria\n- [ ] Status check: 'Reasoning Substrate'\n- [ ] Any error → failure\n- [ ] Warning only → success\n- [ ] None → success\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/status-check.ts\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:49.200362-05:00","updated_at":"2025-12-20T20:40:49.200362-05:00"}
{"id":"mantle-ayy","title":"Design Decisions Reference (D1-D36)","description":"## Key Architectural Decisions\n\n### D1: Pattern as core abstraction\nPatterns (semantic meaning) over files, services, or rules.\n\n### D4: GitHub App auth model\nGitHub App over OAuth for org-level integration with native webhooks.\n\n### D7: Tech stack\nSupabase + Vercel + Trigger.dev - three best-in-class services.\n\n### D8: Claude Sonnet 4.5\nSingle model (claude-sonnet-4-5-20250929) for all LLM tasks.\n\n### D10: Full-repo single-pass extraction\n600k token limit with 1M context beta header.\n\n### D11: Multi-dimensional confidence\n4 dimensions: Evidence, Adoption, Establishment, Location.\n5 health signal categories.\n\n### D15: On-demand token generation\nNo database storage; @octokit/auth-app handles caching.\n\n### D30: Dual channel enforcement\nPR review + AI context as separate toggles.\n\nSee PRD Appendix A for complete decision log (D1-D36).","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-20T20:39:26.272038-05:00","updated_at":"2025-12-20T20:39:26.272038-05:00"}
{"id":"mantle-b0z","title":"Implement GitHub OAuth login flow","description":"OAuth flow for user authentication via GitHub.\n\n## PRD References\n- Task 1.5\n- D4 (GitHub App)\n\n## Acceptance Criteria\n- [ ] Login button triggers OAuth flow\n- [ ] Callback handles code exchange\n- [ ] User record created in Supabase\n- [ ] Session established\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/auth/login/route.ts\n- app/auth/callback/route.ts\n- lib/auth/session.ts\n\n### Dependencies\n- @supabase/ssr\n\n### Notes\nUse Supabase Auth with GitHub provider.\nStore GitHub user ID for later matching.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:16.131874-05:00","updated_at":"2025-12-20T20:39:16.131874-05:00","dependencies":[{"issue_id":"mantle-b0z","depends_on_id":"mantle-g2w","type":"parent-child","created_at":"2025-12-20T20:39:16.195059-05:00","created_by":"daemon"},{"issue_id":"mantle-b0z","depends_on_id":"mantle-nmz","type":"blocks","created_at":"2025-12-20T20:39:16.256851-05:00","created_by":"daemon"},{"issue_id":"mantle-b0z","depends_on_id":"mantle-bm0","type":"blocks","created_at":"2025-12-20T20:39:16.319059-05:00","created_by":"daemon"}]}
{"id":"mantle-bah","title":"Extract pattern evidence with file and line references","description":"Extract evidence for each pattern with code snippets.\n\n## PRD References\n- Task 3.5\n\n## Acceptance Criteria\n- [ ] 2-5 evidence files per pattern\n- [ ] Start/end lines identified\n- [ ] Code snippet captured\n- [ ] capturedAtSha recorded\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/evidence.ts\n\n### Dependencies\nNone\n\n### Notes\nEvidence makes patterns concrete.\nCanonical example marked with isCanonical=true.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:21.468392-05:00","updated_at":"2025-12-20T20:39:21.468392-05:00","dependencies":[{"issue_id":"mantle-bah","depends_on_id":"mantle-c6l","type":"parent-child","created_at":"2025-12-20T20:39:21.531638-05:00","created_by":"daemon"},{"issue_id":"mantle-bah","depends_on_id":"mantle-4pl","type":"blocks","created_at":"2025-12-20T20:39:21.599033-05:00","created_by":"daemon"}]}
{"id":"mantle-bm0","title":"Create GitHub App with required permissions","description":"Register GitHub App with permissions for repo content, PRs, webhooks.\n\n## PRD References\n- Task 1.4\n- D4 (GitHub App auth model)\n\n## Acceptance Criteria\n- [ ] GitHub App registered\n- [ ] Permissions: repo contents, pull_requests, metadata\n- [ ] Webhook URL configured\n- [ ] Private key downloaded and stored\n\n## Implementation Details\n\n### Files to Create/Modify\n- docs/github-app-setup.md\n\n### Dependencies\n- @octokit/auth-app\n- @octokit/rest\n\n### Notes\nPer D4: GitHub App provides native webhooks, PR comments as app identity.\nPermissions: Contents (read), Pull requests (read/write), Metadata (read).\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:15.983747-05:00","updated_at":"2025-12-20T20:39:15.983747-05:00","labels":["critical-path","github"],"dependencies":[{"issue_id":"mantle-bm0","depends_on_id":"mantle-g2w","type":"parent-child","created_at":"2025-12-20T20:39:16.04642-05:00","created_by":"daemon"}]}
{"id":"mantle-c42","title":"Disable PR enforcement for file-structure patterns","description":"Show tooltip for file-structure PR enforcement.\n\n## PRD References\n- Task 4.17\n- D35 (Context-file-only)\n\n## Acceptance Criteria\n- [ ] PR Review disabled for file-structure\n- [ ] Tooltip explains why\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/actions/enforcement-toggles.tsx\n\n## Effort\n1 hour","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T20:40:47.155468-05:00","updated_at":"2025-12-20T20:40:47.155468-05:00"}
{"id":"mantle-c6l","title":"LLM pattern extraction pipeline","description":"Extract patterns from code using Claude Sonnet 4.5.\n\n## PRD References\n- Task 3.1-3.6\n- D8 (Claude Sonnet 4.5)\n- D10 (1M context)\n\n## Acceptance Criteria\n- [ ] Extraction prompt designed and tested\n- [ ] Pipeline handles full repo content\n- [ ] Zod validation for LLM output\n- [ ] Candidates stored with metadata","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.160908-05:00","updated_at":"2025-12-20T20:39:13.160908-05:00","dependencies":[{"issue_id":"mantle-c6l","depends_on_id":"mantle-5lg","type":"parent-child","created_at":"2025-12-20T20:39:13.223402-05:00","created_by":"daemon"}]}
{"id":"mantle-ccy","title":"Implement Promote action with ownership and severity","description":"On promote: set status, owner, severity.\n\n## PRD References\n- Task 4.4\n- D19 (Severity)\n- D22 (Ownership)\n\n## Acceptance Criteria\n- [ ] status changed to 'authoritative'\n- [ ] ownerId and validatedBy set\n- [ ] defaultSeverity from modal\n- [ ] statusChangedAt timestamp\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/patterns.ts\n- app/api/patterns/[id]/promote/route.ts\n\n### Notes\nPer D22: Validator becomes owner for MVP.\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:45.791557-05:00","updated_at":"2025-12-20T20:40:45.791557-05:00","labels":["critical-path"]}
{"id":"mantle-co8","title":"Merge action and real-time progress","description":"Handle duplicate candidates and show live progress.\n\n## PRD References\n- Task 4.12, 4.14\n- D29 (Duplicate detection)\n\n## Acceptance Criteria\n- [ ] Duplicate candidates show merge action\n- [ ] Real-time progress during extraction","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.34036-05:00","updated_at":"2025-12-20T20:39:14.34036-05:00","dependencies":[{"issue_id":"mantle-co8","depends_on_id":"mantle-fjo","type":"parent-child","created_at":"2025-12-20T20:39:14.403631-05:00","created_by":"daemon"}]}
{"id":"mantle-cq2","title":"Add provenance linking with URL input","description":"Link patterns to PRs, docs, Slack threads.\n\n## PRD References\n- Task 4.6\n- D3 (Provenance moat)\n\n## Acceptance Criteria\n- [ ] URL input field in promote modal\n- [ ] Type selection (PR, doc, Slack)\n- [ ] Provenance records created\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/actions/provenance-input.tsx\n- lib/db/provenance.ts\n\n### Notes\nAuto-detect type from URL if possible.\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.047655-05:00","updated_at":"2025-12-20T20:40:46.047655-05:00"}
{"id":"mantle-cz6","title":"Filesystem pattern → markdown transformer","description":"Convert filesystem patterns for context files.\n\n## PRD References\n- Task 5a.5\n- D31 (Filesystem patterns)\n\n## Acceptance Criteria\n- [ ] Dedicated section for filesystem\n- [ ] Glob patterns shown\n- [ ] Anti-pattern examples included\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/context-files/filesystem-transform.ts\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:47.648245-05:00","updated_at":"2025-12-20T20:40:47.648245-05:00"}
{"id":"mantle-dt0","title":"Post inline PR comments for violations","description":"Post comments with owner attribution.\n\n## PRD References\n- Task 5b.9\n- D12 (Attribution)\n\n## Acceptance Criteria\n- [ ] Inline comment at violation location\n- [ ] Pattern name and type\n- [ ] Owner attribution\n- [ ] Rationale snippet\n- [ ] Dismiss link\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/comments.ts\n- lib/enforcement/comment-template.ts\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:48.951161-05:00","updated_at":"2025-12-20T20:40:48.951161-05:00","labels":["critical-path"]}
{"id":"mantle-e3r","title":"Core database schema","description":"Create database tables for users, repos, patterns, evidence.\n\n## PRD References\n- Task 1.6\n- Section 2.4 (Data Model)\n- D5 (Multi-repo)\n\n## Acceptance Criteria\n- [ ] All tables from Section 2.4 created\n- [ ] RLS policies configured\n- [ ] Foreign keys with proper cascades","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:12.554308-05:00","updated_at":"2025-12-20T20:39:12.554308-05:00","dependencies":[{"issue_id":"mantle-e3r","depends_on_id":"mantle-gd2","type":"parent-child","created_at":"2025-12-20T20:39:12.61602-05:00","created_by":"daemon"}]}
{"id":"mantle-efy","title":"Generate diff summary for evolution requests","description":"LLM summarizes evidence file changes.\n\n## PRD References\n- Task 5b.6\n- D27 (Evolution)\n\n## Acceptance Criteria\n- [ ] LLM generates concise summary\n- [ ] Stored in PatternEvolutionRequest\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/enforcement/diff-summary.ts\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:48.697237-05:00","updated_at":"2025-12-20T20:40:48.697237-05:00"}
{"id":"mantle-ej0","title":"GitHub rate limit handling with backoff","description":"Check rate limits, exponential backoff.\n\n## PRD References\n- Task 6.1e\n\n## Acceptance Criteria\n- [ ] Check rate limit headers\n- [ ] Back off when \u003c100 remaining\n- [ ] Exponential backoff on 403\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/rate-limit.ts\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:49.887619-05:00","updated_at":"2025-12-20T20:40:49.887619-05:00"}
{"id":"mantle-el4","title":"Display impact preview in validation UI","description":"Show 'Would have caught X violations' on cards.\n\n## PRD References\n- Task 4.10\n- D12 (Engagement loop)\n\n## Acceptance Criteria\n- [ ] Backtest results on pattern card\n- [ ] Violation and PR count\n- [ ] Click through to details\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/backtest-preview.tsx\n\n### Notes\nMakes action feel consequential.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:46.464872-05:00","updated_at":"2025-12-20T20:40:46.464872-05:00"}
{"id":"mantle-emv","title":"Calculate token count during ingestion","description":"Estimate token count for extraction limit checking.\n\n## PRD References\n- Task 2.12\n- D10 (600k limit)\n\n## Acceptance Criteria\n- [ ] Token count estimated per file (0.25 tokens/char)\n- [ ] Total stored on Repo\n- [ ] Extraction blocked if \u003e600k tokens\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/tokens.ts\n- lib/db/repos.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D10: 600k token limit for extraction.\nSimple estimate: characters × 0.25\nConsider tiktoken for accuracy post-MVP.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:19.972063-05:00","updated_at":"2025-12-20T20:39:19.972063-05:00","dependencies":[{"issue_id":"mantle-emv","depends_on_id":"mantle-9u9","type":"parent-child","created_at":"2025-12-20T20:39:20.035938-05:00","created_by":"daemon"},{"issue_id":"mantle-emv","depends_on_id":"mantle-9au","type":"blocks","created_at":"2025-12-20T20:39:20.097747-05:00","created_by":"daemon"}]}
{"id":"mantle-eza","title":"2-dimension confidence for filesystem patterns","description":"Compute simplified confidence for filesystem patterns.\n\n## PRD References\n- Task 3.19\n- D34 (2-dimension confidence)\n\n## Acceptance Criteria\n- [ ] Evidence dimension: path count\n- [ ] Adoption dimension: % following convention\n- [ ] confidenceModel='filesystem' set\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/confidence/filesystem.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D34: No Establishment or Location dimensions.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:24.913402-05:00","updated_at":"2025-12-20T20:39:24.913402-05:00","dependencies":[{"issue_id":"mantle-eza","depends_on_id":"mantle-61c","type":"parent-child","created_at":"2025-12-20T20:39:24.980169-05:00","created_by":"daemon"},{"issue_id":"mantle-eza","depends_on_id":"mantle-j0g","type":"blocks","created_at":"2025-12-20T20:39:25.04931-05:00","created_by":"daemon"}]}
{"id":"mantle-f5z","title":"Run backtest against historical PRs","description":"Detect violations across stored PR diffs.\n\n## PRD References\n- Task 4.9\n- D12 (Engagement loop)\n- D28 (Diff storage)\n\n## Acceptance Criteria\n- [ ] Each candidate tested against PRs\n- [ ] Summary in Pattern.backtestSummary\n- [ ] Details in backtest_violations table\n- [ ] CASCADE delete on pattern deletion\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/backtest/run-backtest.ts\n- lib/db/backtest-violations.ts\n\n### Notes\nPer D28: Diffs from Supabase Storage.\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:46.315412-05:00","updated_at":"2025-12-20T20:40:46.315412-05:00","labels":["critical-path"]}
{"id":"mantle-fjo","title":"Build human validation workflow with backtest and queue UX","description":"Enable humans to review pattern candidates, promote to authoritative status with\nrationale and provenance, and see impact preview via backtest.\n\n## PRD References\n- Section 6.2 Phase 4\n- D12 (Engagement loop)\n- D13 (Pattern mental model)\n- D17-D22 (Validation decisions)\n- D29 (Duplicate detection)\n\n## Effort\n9 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:11.918367-05:00","updated_at":"2025-12-20T20:39:11.918367-05:00"}
{"id":"mantle-fo7","title":"Pattern → markdown transformer (base)","description":"Convert authoritative patterns to markdown.\n\n## PRD References\n- Task 5a.3\n- D30 (Dual channel)\n\n## Acceptance Criteria\n- [ ] Patterns with aiContext=true included\n- [ ] Structured markdown\n- [ ] Evidence references included\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/context-files/transform.ts\n\n### Notes\nPer D30: Only enforcement.aiContext=true patterns.\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:47.414205-05:00","updated_at":"2025-12-20T20:40:47.414205-05:00","labels":["critical-path"]}
{"id":"mantle-g2w","title":"GitHub App authentication flow","description":"Set up GitHub App, OAuth flow, and installation handling.\n\n## PRD References\n- Task 1.4, 1.5, 1.7, 1.8\n- D4 (GitHub App auth)\n- D15 (On-demand tokens)\n\n## Acceptance Criteria\n- [ ] GitHub App configured with required permissions\n- [ ] OAuth login flow working\n- [ ] Installation flow captures repos\n- [ ] On-demand token generation working","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:12.408084-05:00","updated_at":"2025-12-20T20:39:12.408084-05:00","dependencies":[{"issue_id":"mantle-g2w","depends_on_id":"mantle-gd2","type":"parent-child","created_at":"2025-12-20T20:39:12.47114-05:00","created_by":"daemon"}]}
{"id":"mantle-g5w","title":"Generate AI agent context files from authoritative patterns","description":"Transform authoritative patterns into CLAUDE.md and .cursorrules formats\nwith marker-based append and debounced sync.\n\n## PRD References\n- Section 6.2 Phase 5a\n- D30 (Dual channel enforcement)\n- D32 (Claude + Cursor formats)\n- D33 (Marker-based append)\n- D36 (Debounced sync)\n\n## Effort\n5 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:12.003931-05:00","updated_at":"2025-12-20T20:39:12.003931-05:00"}
{"id":"mantle-gd2","title":"Establish infrastructure, auth, and core data model","description":"Set up the foundational infrastructure including Next.js on Vercel, Supabase for\ndatabase and auth, Trigger.dev for background jobs, and GitHub App for repo integration.\nUser should be able to log in, install the GitHub App, and see repos in an empty dashboard.\n\n## PRD References\n- Section 6.2 Phase 1\n- D4 (GitHub App auth model)\n- D7 (Tech stack)\n- D15 (Token handling)\n\n## Effort\n5 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:11.661269-05:00","updated_at":"2025-12-20T20:39:11.661269-05:00"}
{"id":"mantle-h2p","title":"Enforcement channel toggles in promotion modal","description":"Add PR Review and AI Agents checkboxes.\n\n## PRD References\n- Task 4.16\n- D30 (Dual channel)\n\n## Acceptance Criteria\n- [ ] PR Review checkbox (default: true)\n- [ ] AI Agents checkbox (default: true)\n- [ ] Severity dropdown per channel\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/actions/enforcement-toggles.tsx\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:47.069085-05:00","updated_at":"2025-12-20T20:40:47.069085-05:00"}
{"id":"mantle-h44","title":"Basic UI to list candidate patterns with confidence tiers","description":"Display extracted patterns with tier badges.\n\n## PRD References\n- Task 3.12\n\n## Acceptance Criteria\n- [ ] Patterns listed with name, type, tier badge\n- [ ] Sortable by tier and extraction date\n- [ ] Clickable to view details\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/repos/[id]/patterns/page.tsx\n- components/patterns/pattern-list.tsx\n- components/patterns/tier-badge.tsx\n\n### Dependencies\nNone\n\n### Notes\nBasic list view; full validation UI in Phase 4.\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:39:23.159973-05:00","updated_at":"2025-12-20T20:39:23.159973-05:00","dependencies":[{"issue_id":"mantle-h44","depends_on_id":"mantle-2on","type":"parent-child","created_at":"2025-12-20T20:39:23.223465-05:00","created_by":"daemon"},{"issue_id":"mantle-h44","depends_on_id":"mantle-6c2","type":"blocks","created_at":"2025-12-20T20:39:23.285998-05:00","created_by":"daemon"}]}
{"id":"mantle-h9g","title":"Implement re-extraction trigger","description":"Manual 're-analyze repo' button.\n\n## PRD References\n- Task 6.5\n- D9 (Re-extraction)\n\n## Acceptance Criteria\n- [ ] Button triggers re-extraction\n- [ ] Candidates/deferred deleted\n- [ ] Authoritative preserved\n- [ ] Rejected preserved\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/repos/re-extract-button.tsx\n- app/api/repos/[id]/re-extract/route.ts\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:50.318136-05:00","updated_at":"2025-12-20T20:40:50.318136-05:00"}
{"id":"mantle-hgt","title":"Store pattern candidates with initial status","description":"Store extracted patterns as candidates.\n\n## PRD References\n- Task 3.6\n\n## Acceptance Criteria\n- [ ] Patterns stored with status='candidate'\n- [ ] Evidence records created\n- [ ] Linked to repo and extraction run\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/patterns.ts\n- lib/db/pattern-evidence.ts\n\n### Dependencies\n- @supabase/supabase-js\n\n### Notes\nInitial tier derived from confidence.\nReady for validation queue.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:21.690345-05:00","updated_at":"2025-12-20T20:39:21.690345-05:00","dependencies":[{"issue_id":"mantle-hgt","depends_on_id":"mantle-c6l","type":"parent-child","created_at":"2025-12-20T20:39:21.753274-05:00","created_by":"daemon"},{"issue_id":"mantle-hgt","depends_on_id":"mantle-bah","type":"blocks","created_at":"2025-12-20T20:39:21.814939-05:00","created_by":"daemon"}]}
{"id":"mantle-hxx","title":"Implement PR analysis with violation comments and evolution detection","description":"Set up webhook endpoint for PR events, analyze diffs against authoritative patterns,\npost violation comments, create status checks, and handle pattern evolution.\n\n## PRD References\n- Section 6.2 Phase 5b\n- D19 (Violation severity)\n- D26 (Dismissal)\n- D27 (Evolution detection)\n- D30 (Dual channel)\n\n## Effort\n7 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:12.08977-05:00","updated_at":"2025-12-20T20:39:12.08977-05:00"}
{"id":"mantle-ih5","title":"Pattern confidence cards and triage queue","description":"Keyboard-driven triage with confidence cards and tier badges.\n\n## PRD References\n- Task 4.1, 4.2, 4.8, 4.11, 4.15\n- D13 (Pattern mental model)\n- D17 (Queue sorting)\n\n## Acceptance Criteria\n- [ ] Confidence cards with dimension bars\n- [ ] Queue sorted by tier with backtest tie-breaking\n- [ ] Keyboard navigation (j/k/p/r/d)","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.750735-05:00","updated_at":"2025-12-20T20:39:13.750735-05:00","dependencies":[{"issue_id":"mantle-ih5","depends_on_id":"mantle-fjo","type":"parent-child","created_at":"2025-12-20T20:39:13.81386-05:00","created_by":"daemon"}]}
{"id":"mantle-ive","title":"Add loading states and progress indicators","description":"Loading spinners and progress indicators.\n\n## PRD References\n- Task 6.3\n\n## Acceptance Criteria\n- [ ] Loading spinner for data fetching\n- [ ] Progress during extraction\n- [ ] Skeleton loaders\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/ui/loading.tsx\n- components/ui/skeleton.tsx\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:50.146602-05:00","updated_at":"2025-12-20T20:40:50.146602-05:00"}
{"id":"mantle-j0g","title":"Store FilesystemPatternEvidence","description":"Store example paths, glob patterns, anti-patterns.\n\n## PRD References\n- Task 3.18\n\n## Acceptance Criteria\n- [ ] FilesystemPatternEvidence records created\n- [ ] globPattern stored on Pattern\n- [ ] antiPatternExamples stored\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/filesystem-patterns.ts\n\n### Dependencies\nNone\n\n### Notes\nOne row per path (like PatternEvidence).\nisDirectory flag distinguishes file vs directory.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:24.700759-05:00","updated_at":"2025-12-20T20:39:24.700759-05:00","dependencies":[{"issue_id":"mantle-j0g","depends_on_id":"mantle-61c","type":"parent-child","created_at":"2025-12-20T20:39:24.763434-05:00","created_by":"daemon"},{"issue_id":"mantle-j0g","depends_on_id":"mantle-93f","type":"blocks","created_at":"2025-12-20T20:39:24.827189-05:00","created_by":"daemon"}]}
{"id":"mantle-k22","title":"Compute confidence dimensions from git metadata","description":"Calculate Evidence, Adoption, Establishment, Location dimensions.\n\n## PRD References\n- Task 3.7\n- D11 (4 dimensions)\n- D25 (Location classification)\n\n## Acceptance Criteria\n- [ ] Evidence: instance count + similarity\n- [ ] Adoption: unique authors from git blame\n- [ ] Establishment: age from git history\n- [ ] Location: code area classification\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/confidence/dimensions.ts\n- lib/extraction/confidence/location.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D11: Each dimension answers distinct question.\nPer D25: 7 location categories via LLM.\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:21.900754-05:00","updated_at":"2025-12-20T20:39:21.900754-05:00","dependencies":[{"issue_id":"mantle-k22","depends_on_id":"mantle-1an","type":"parent-child","created_at":"2025-12-20T20:39:21.964625-05:00","created_by":"daemon"},{"issue_id":"mantle-k22","depends_on_id":"mantle-qti","type":"blocks","created_at":"2025-12-20T20:39:22.028831-05:00","created_by":"daemon"},{"issue_id":"mantle-k22","depends_on_id":"mantle-hgt","type":"blocks","created_at":"2025-12-20T20:39:22.093907-05:00","created_by":"daemon"}]}
{"id":"mantle-kih","title":"Pattern evolution detection and review","description":"Detect evidence modifications and enable owner review.\n\n## PRD References\n- Task 5b.5, 5b.6, 5b.14-5b.16\n- D27 (Evolution detection)\n\n## Acceptance Criteria\n- [ ] Evidence modifications detected in PRs\n- [ ] PatternEvolutionRequest created\n- [ ] Owner can accept or create violation","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:14.928128-05:00","updated_at":"2025-12-20T20:39:14.928128-05:00","dependencies":[{"issue_id":"mantle-kih","depends_on_id":"mantle-hxx","type":"parent-child","created_at":"2025-12-20T20:39:14.99773-05:00","created_by":"daemon"}]}
{"id":"mantle-lp6","title":"Build evidence management UI with autocomplete","description":"Modal for evidence management with file path autocomplete.\n\n## PRD References\n- Task 4.13\n- D21 (Evidence management)\n\n## Acceptance Criteria\n- [ ] Autocomplete from repo_files table\n- [ ] Validate path exists\n- [ ] Set/change canonical example\n- [ ] Stale evidence warning badge\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/evidence-modal.tsx\n- components/patterns/file-autocomplete.tsx\n- app/api/patterns/[id]/evidence/route.ts\n\n### Notes\nPer D21: Capture HEAD SHA on add.\n\n## Effort\n6 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.804839-05:00","updated_at":"2025-12-20T20:40:46.804839-05:00"}
{"id":"mantle-nii","title":"Implement stale evidence detection","description":"Detect when evidence files have changed since capture.\n\n## PRD References\n- Task 2.14\n- D21 (Staleness detection)\n\n## Acceptance Criteria\n- [ ] Compare capturedAtSha with current HEAD\n- [ ] Check if file exists at current HEAD\n- [ ] Calculate staleness reason\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/evidence/staleness.ts\n\n### Dependencies\n- @octokit/rest\n\n### Notes\nPer D21: Display stale evidence with warning.\nReasons: file-deleted, file-modified, lines-shifted\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:39:20.395628-05:00","updated_at":"2025-12-20T20:39:20.395628-05:00","dependencies":[{"issue_id":"mantle-nii","depends_on_id":"mantle-9u9","type":"parent-child","created_at":"2025-12-20T20:39:20.459736-05:00","created_by":"daemon"},{"issue_id":"mantle-nii","depends_on_id":"mantle-ont","type":"blocks","created_at":"2025-12-20T20:39:20.522723-05:00","created_by":"daemon"}]}
{"id":"mantle-nmz","title":"Set up Supabase project with auth","description":"Create Supabase project, configure GitHub OAuth provider, set up local dev.\n\n## PRD References\n- Task 1.2\n- D6 (Own database)\n- D7 (Supabase)\n\n## Acceptance Criteria\n- [ ] Supabase project created\n- [ ] GitHub OAuth configured as provider\n- [ ] Local Supabase CLI working\n- [ ] Environment variables documented\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/client.ts\n- .env.local.example\n\n### Dependencies\n- @supabase/supabase-js\n- @supabase/ssr\n\n### Notes\nConfigure GitHub as OAuth provider in Supabase dashboard.\nService role key for server-side operations.\n\n## Effort\n2 hours","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:15.689318-05:00","updated_at":"2025-12-20T21:05:03.186455-05:00","closed_at":"2025-12-20T21:05:03.186457-05:00","labels":["phase:1","supabase"],"dependencies":[{"issue_id":"mantle-nmz","depends_on_id":"mantle-81h","type":"parent-child","created_at":"2025-12-20T20:39:15.751836-05:00","created_by":"daemon"}]}
{"id":"mantle-obe","title":"Add empty states for all views","description":"Helpful empty states.\n\n## PRD References\n- Task 6.4\n\n## Acceptance Criteria\n- [ ] Empty state for no patterns\n- [ ] Empty state for no violations\n- [ ] Empty state for no repos\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/ui/empty-state.tsx\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:50.231556-05:00","updated_at":"2025-12-20T20:40:50.231556-05:00"}
{"id":"mantle-ocs","title":"Create Trigger.dev analyzePR job","description":"Background job for PR analysis.\n\n## PRD References\n- Task 5b.7\n\n## Acceptance Criteria\n- [ ] Job triggered on webhook\n- [ ] Updates analysisStatus\n- [ ] Errors captured\n\n## Implementation Details\n\n### Files to Create/Modify\n- jobs/analyze-pr.ts\n\n### Dependencies\n- @trigger.dev/sdk\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:48.782282-05:00","updated_at":"2025-12-20T20:40:48.782282-05:00"}
{"id":"mantle-ois","title":"Build weekly impact digest dashboard widget","description":"Rolling 7-day window with time saved.\n\n## PRD References\n- Task 6.7\n- D12 (Engagement loop)\n\n## Acceptance Criteria\n- [ ] Last 7 days violations count\n- [ ] Time saved (violations × 15 min)\n- [ ] Top 3 patterns\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/dashboard/impact-digest.tsx\n- lib/metrics/impact.ts\n\n### Notes\nAVG_REVIEW_MINUTES = 15\n\n## Effort\n4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:50.489247-05:00","updated_at":"2025-12-20T20:40:50.489247-05:00"}
{"id":"mantle-ont","title":"Build repo_files table for evidence autocomplete","description":"Searchable file path index for evidence management.\n\n## PRD References\n- Task 2.13\n- D21 (Evidence autocomplete)\n\n## Acceptance Criteria\n- [ ] repo_files table with path and metadata\n- [ ] Full-text search on paths\n- [ ] Updated on ingestion\n\n## Implementation Details\n\n### Files to Create/Modify\n- supabase/migrations/003_repo_files.sql\n- lib/db/repo-files.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D21: Autocomplete from repo_files table.\nInclude file type and size for filtering.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:20.183789-05:00","updated_at":"2025-12-20T20:39:20.183789-05:00","dependencies":[{"issue_id":"mantle-ont","depends_on_id":"mantle-9u9","type":"parent-child","created_at":"2025-12-20T20:39:20.246846-05:00","created_by":"daemon"},{"issue_id":"mantle-ont","depends_on_id":"mantle-9au","type":"blocks","created_at":"2025-12-20T20:39:20.31063-05:00","created_by":"daemon"}]}
{"id":"mantle-phn","title":"Fetch PR diff on webhook event","description":"Retrieve diff for PR analysis.\n\n## PRD References\n- Task 5b.2\n\n## Acceptance Criteria\n- [ ] Diff fetched from GitHub API\n- [ ] Full diff available for analysis\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/diff.ts\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:48.226602-05:00","updated_at":"2025-12-20T20:40:48.226602-05:00"}
{"id":"mantle-pjo","title":"Build ingestion progress tracking with Realtime","description":"Update ingestionStatus and emit Realtime events.\n\n## PRD References\n- Task 2.11\n\n## Acceptance Criteria\n- [ ] Status updates: pending → ingesting → ingested/failed\n- [ ] Supabase Realtime events on status change\n- [ ] UI subscribes for live updates\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/repos.ts\n- hooks/use-ingestion-progress.ts\n\n### Dependencies\n- @supabase/realtime-js\n\n### Notes\nRealtime already configured on repos table.\nUnsubscribe on unmount.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:19.759195-05:00","updated_at":"2025-12-20T20:39:19.759195-05:00","dependencies":[{"issue_id":"mantle-pjo","depends_on_id":"mantle-9u9","type":"parent-child","created_at":"2025-12-20T20:39:19.82385-05:00","created_by":"daemon"},{"issue_id":"mantle-pjo","depends_on_id":"mantle-qh0","type":"blocks","created_at":"2025-12-20T20:39:19.886478-05:00","created_by":"daemon"}]}
{"id":"mantle-q9p","title":"Fetch last 30 merged PRs and store diffs","description":"Fetch PR history for backtest and store diffs in Supabase Storage.\n\n## PRD References\n- Task 2.10\n- D28 (Supabase Storage)\n- D12 (Backtest)\n\n## Acceptance Criteria\n- [ ] Last 30 merged PRs fetched\n- [ ] Diff content stored in Supabase Storage\n- [ ] PR metadata in database\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/prs.ts\n- lib/storage/diffs.ts\n\n### Dependencies\n- @supabase/storage-js\n\n### Notes\nPer D28: Store diffs in Supabase Storage for fast backtest.\nPath: pr_diffs/{repo_id}/{pr_number}.diff\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:19.533105-05:00","updated_at":"2025-12-20T20:39:19.533105-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-q9p","depends_on_id":"mantle-9u9","type":"parent-child","created_at":"2025-12-20T20:39:19.597173-05:00","created_by":"daemon"},{"issue_id":"mantle-q9p","depends_on_id":"mantle-0yn","type":"blocks","created_at":"2025-12-20T20:39:19.662166-05:00","created_by":"daemon"}]}
{"id":"mantle-qab","title":"Implement keyboard-driven triage queue","description":"Superhuman-style queue with j/k/p/r/d shortcuts.\n\n## PRD References\n- Task 4.11\n- D13 (Pattern mental model)\n- D17 (Queue sorting)\n\n## Acceptance Criteria\n- [ ] j/k for next/previous\n- [ ] p for Promote, r for Reject, d for Defer\n- [ ] Progress bar\n- [ ] Deferred patterns separate section\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/patterns/triage/page.tsx\n- components/patterns/triage-queue.tsx\n- hooks/use-keyboard-navigation.ts\n\n### Notes\nPer D13: Keyboard-first linear queue.\n\n## Effort\n8 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:46.634851-05:00","updated_at":"2025-12-20T20:40:46.634851-05:00"}
{"id":"mantle-qh0","title":"Create Trigger.dev ingestRepo job","description":"Background job that orchestrates full repository ingestion.\n\n## PRD References\n- Task 2.4\n\n## Acceptance Criteria\n- [ ] Job triggered on repo connection\n- [ ] Orchestrates tree → content → store\n- [ ] Updates ingestionStatus through states\n- [ ] Errors captured with retry\n\n## Implementation Details\n\n### Files to Create/Modify\n- jobs/ingest-repo.ts\n\n### Dependencies\n- @trigger.dev/sdk\n\n### Notes\nStatus flow: pending → ingesting → ingested/failed\nTrigger extraction job on success.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:18.099511-05:00","updated_at":"2025-12-20T20:39:18.099511-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-qh0","depends_on_id":"mantle-457","type":"parent-child","created_at":"2025-12-20T20:39:18.164122-05:00","created_by":"daemon"},{"issue_id":"mantle-qh0","depends_on_id":"mantle-4s4","type":"blocks","created_at":"2025-12-20T20:39:18.228693-05:00","created_by":"daemon"},{"issue_id":"mantle-qh0","depends_on_id":"mantle-9au","type":"blocks","created_at":"2025-12-20T20:39:18.292599-05:00","created_by":"daemon"}]}
{"id":"mantle-qr4","title":"Implement auth flow deep linking with returnTo","description":"Preserve original URL through OAuth.\n\n## PRD References\n- Task 6.11\n\n## Acceptance Criteria\n- [ ] returnTo stored in cookie/session\n- [ ] Redirect to original URL post-login\n- [ ] Works for violation dismissal\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/auth/callback/route.ts\n- lib/auth/deep-link.ts\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:50.744793-05:00","updated_at":"2025-12-20T20:40:50.744793-05:00"}
{"id":"mantle-qti","title":"Store blame and history data","description":"Store git metadata for confidence computation.\n\n## PRD References\n- Task 2.8\n\n## Acceptance Criteria\n- [ ] Blame data stored per file\n- [ ] Commit data stored per repo\n- [ ] Efficient querying for confidence\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/git-metadata.ts\n\n### Dependencies\n- @supabase/supabase-js\n\n### Notes\nDenormalize for query efficiency.\nConsider JSONB for per-line data.\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:19.02661-05:00","updated_at":"2025-12-20T20:39:19.02661-05:00","dependencies":[{"issue_id":"mantle-qti","depends_on_id":"mantle-v22","type":"parent-child","created_at":"2025-12-20T20:39:19.090573-05:00","created_by":"daemon"},{"issue_id":"mantle-qti","depends_on_id":"mantle-vdf","type":"blocks","created_at":"2025-12-20T20:39:19.154486-05:00","created_by":"daemon"},{"issue_id":"mantle-qti","depends_on_id":"mantle-7xl","type":"blocks","created_at":"2025-12-20T20:39:19.217894-05:00","created_by":"daemon"}]}
{"id":"mantle-r46","title":"Build GitHub App installation flow","description":"Handle App installation callback, store installation ID and repos.\n\n## PRD References\n- Task 1.7\n- D4 (GitHub App)\n\n## Acceptance Criteria\n- [ ] Installation callback endpoint\n- [ ] installationId stored per org/user\n- [ ] Selected repos stored in database\n- [ ] Redirect to dashboard after install\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/api/github/install/callback/route.ts\n- lib/github/installation.ts\n\n### Dependencies\n- @octokit/auth-app\n\n### Notes\nGitHub sends installation.created webhook.\nStore installationId for later token generation.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:16.619093-05:00","updated_at":"2025-12-20T20:39:16.619093-05:00","labels":["critical-path"],"dependencies":[{"issue_id":"mantle-r46","depends_on_id":"mantle-g2w","type":"parent-child","created_at":"2025-12-20T20:39:16.684606-05:00","created_by":"daemon"},{"issue_id":"mantle-r46","depends_on_id":"mantle-bm0","type":"blocks","created_at":"2025-12-20T20:39:16.747981-05:00","created_by":"daemon"},{"issue_id":"mantle-r46","depends_on_id":"mantle-8b4","type":"blocks","created_at":"2025-12-20T20:39:16.81166-05:00","created_by":"daemon"}]}
{"id":"mantle-scp","title":"Risk Register (R1-R10)","description":"## Product Risks\n\n### R1: Extraction quality insufficient\nLikelihood: Medium | Impact: Critical\nMitigation: Iterative prompt engineering; confidence scoring.\nDetection: M5 - measure precision. Kill threshold: \u003c60%\n\n### R2: Violation detection is noisy\nLikelihood: Medium | Impact: High\nMitigation: Conservative thresholds; severity tiers; dismiss action.\nDetection: Track dismiss rate. \u003e20% = pattern review.\n\n### R4: Time-to-value too slow\nLikelihood: Medium | Impact: High\nMitigation: Async extraction; progress indicators.\nDetection: M12 - target \u003c15 min.\n\n### R5: Candidate queue ignored\nLikelihood: Medium | Impact: High\nMitigation: Impact preview; queue UX; weekly digest.\nDetection: \u003c30% action rate in 14 days = problem.\n\n### R7: GitHub ships pattern enforcement\nLikelihood: Medium | Impact: Critical\nMitigation: Provenance moat; move fast; differentiate on depth.\n\nSee PRD for complete risk register (R1-R10).","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-20T20:39:26.356347-05:00","updated_at":"2025-12-20T20:39:26.356347-05:00"}
{"id":"mantle-t1p","title":"Validation actions (Promote, Reject, Defer)","description":"Core validation actions with workflows.\n\n## PRD References\n- Task 4.3-4.6, 4.16, 4.17\n- D18 (Rejection flow)\n- D19 (Severity)\n- D22 (Ownership)\n- D30 (Dual channel toggles)\n\n## Acceptance Criteria\n- [ ] Promote with modal, severity, rationale\n- [ ] Reject with optional reason\n- [ ] Defer instant with count tracking\n- [ ] Enforcement channel toggles","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:13.897001-05:00","updated_at":"2025-12-20T20:39:13.897001-05:00","dependencies":[{"issue_id":"mantle-t1p","depends_on_id":"mantle-fjo","type":"parent-child","created_at":"2025-12-20T20:39:13.961927-05:00","created_by":"daemon"}]}
{"id":"mantle-tih","title":"Store violations with idempotency","description":"Store violations with duplicate prevention.\n\n## PRD References\n- Task 5b.8\n- D19 (Severity)\n\n## Acceptance Criteria\n- [ ] Violations stored with references\n- [ ] Severity from pattern.defaultSeverity\n- [ ] Idempotent storage\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/db/violations.ts\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:48.866052-05:00","updated_at":"2025-12-20T20:40:48.866052-05:00"}
{"id":"mantle-u29","title":"Duplicate detection for candidates vs authoritative patterns","description":"Detect candidates similar to existing authoritative patterns.\n\n## PRD References\n- Task 3.15\n- D29 (Duplicate detection)\n\n## Acceptance Criteria\n- [ ] Candidates compared against authoritative patterns\n- [ ] Similar patterns flagged with similarToPatternId\n- [ ] Bundled with health signals prompt\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/extraction/similarity.ts\n\n### Dependencies\nNone\n\n### Notes\nPer D29: Bundle with health signals prompt.\nAsk LLM for semantic similarity.\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:39:24.005386-05:00","updated_at":"2025-12-20T20:39:24.005386-05:00","dependencies":[{"issue_id":"mantle-u29","depends_on_id":"mantle-2on","type":"parent-child","created_at":"2025-12-20T20:39:24.067293-05:00","created_by":"daemon"},{"issue_id":"mantle-u29","depends_on_id":"mantle-hgt","type":"blocks","created_at":"2025-12-20T20:39:24.135608-05:00","created_by":"daemon"},{"issue_id":"mantle-u29","depends_on_id":"mantle-2ou","type":"blocks","created_at":"2025-12-20T20:39:24.199397-05:00","created_by":"daemon"}]}
{"id":"mantle-uof","title":"Implement merge action for duplicate candidates","description":"One-click merge to transfer evidence.\n\n## PRD References\n- Task 4.14\n- D29 (Duplicate detection)\n\n## Acceptance Criteria\n- [ ] Duplicate card variant\n- [ ] Merge copies evidence to target\n- [ ] Candidate deleted\n- [ ] Success toast\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/duplicate-card.tsx\n- app/api/patterns/[id]/merge/route.ts\n\n### Notes\nKeyboard shortcut: 'm' for merge.\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:46.889934-05:00","updated_at":"2025-12-20T20:40:46.889934-05:00"}
{"id":"mantle-v22","title":"Git history and blame fetching","description":"Fetch git blame and commit history for confidence dimensions.\n\n## PRD References\n- Task 2.6, 2.7, 2.8, 2.9\n- D11 (Confidence dimensions)\n\n## Acceptance Criteria\n- [ ] Git blame fetched per file\n- [ ] Commit history with authors/dates\n- [ ] Author lookup with username resolution\n- [ ] Data ready for confidence scoring","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:12.853179-05:00","updated_at":"2025-12-20T20:39:12.853179-05:00","dependencies":[{"issue_id":"mantle-v22","depends_on_id":"mantle-w6l","type":"parent-child","created_at":"2025-12-20T20:39:12.915653-05:00","created_by":"daemon"}]}
{"id":"mantle-vdf","title":"Fetch git blame for each file","description":"Get author and date information per line for confidence dimensions.\n\n## PRD References\n- Task 2.6\n- D11 (Adoption and Establishment)\n\n## Acceptance Criteria\n- [ ] Blame data fetched per file\n- [ ] Author email and date per line\n- [ ] Batched to manage API usage\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/github/blame.ts\n\n### Dependencies\n- @octokit/graphql\n\n### Notes\nPer D11: Need author for Adoption, date for Establishment.\nGraphQL API more efficient for blame.\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:39:18.591654-05:00","updated_at":"2025-12-20T20:39:18.591654-05:00","dependencies":[{"issue_id":"mantle-vdf","depends_on_id":"mantle-v22","type":"parent-child","created_at":"2025-12-20T20:39:18.655819-05:00","created_by":"daemon"},{"issue_id":"mantle-vdf","depends_on_id":"mantle-0yn","type":"blocks","created_at":"2025-12-20T20:39:18.720659-05:00","created_by":"daemon"}]}
{"id":"mantle-w3d","title":"Restructure docs for guided autonomy","description":"Transformed beads from implementation specs to sprint tracking. Simplified project spec YAML by removing implementation details. Claude Code now makes implementation decisions using CLAUDE.md conventions.\n\n## Changes Made\n- Updated .beads/README.md with guided autonomy philosophy\n- Stripped 105 implementation blocks from project spec YAML\n- Simplified 93 open beads by removing file paths, dependencies, notes\n\n## New Model\n- Beads = WHAT (acceptance criteria, PRD refs)\n- CLAUDE.md = HOW (conventions, patterns)\n- Claude Code = DECISIONS (files, implementations)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T20:43:12.300842-05:00","updated_at":"2025-12-23T20:43:12.300842-05:00"}
{"id":"mantle-w6l","title":"Ingest repositories with git history and PR history","description":"Fetch repository content, git blame/history for confidence dimensions,\nand PR history for backtest. Store indexed files for evidence autocomplete.\n\n## PRD References\n- Section 6.2 Phase 2\n- D10 (Token counting)\n- D21 (Evidence autocomplete)\n- D28 (PR diff storage)\n\n## Effort\n5 days estimated","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T20:39:11.748256-05:00","updated_at":"2025-12-20T20:39:11.748256-05:00"}
{"id":"mantle-wab","title":"Configure Trigger.dev job retry logic","description":"Set max attempts and exponential backoff.\n\n## PRD References\n- Task 6.2\n\n## Acceptance Criteria\n- [ ] Max 3 attempts configured\n- [ ] Exponential backoff\n- [ ] Integrates with error handling\n\n## Implementation Details\n\n### Files to Create/Modify\n- trigger.config.ts\n- jobs/*.ts\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:50.060617-05:00","updated_at":"2025-12-20T20:40:50.060617-05:00"}
{"id":"mantle-wed","title":"Re-extraction, auto-behaviors, and impact metrics","description":"Maintenance features for ongoing pattern management.\n\n## PRD References\n- Task 6.5, 6.5a, 6.7-6.11\n- D9 (Re-extraction)\n- D12 (Impact digest)\n\n## Acceptance Criteria\n- [ ] Manual re-extraction with evidence recapture\n- [ ] Weekly impact digest widget\n- [ ] Auto-archive for stale weak patterns","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:15.380186-05:00","updated_at":"2025-12-20T20:39:15.380186-05:00","dependencies":[{"issue_id":"mantle-wed","depends_on_id":"mantle-31q","type":"parent-child","created_at":"2025-12-20T20:39:15.448195-05:00","created_by":"daemon"}]}
{"id":"mantle-wei","title":"Build pattern evolution review page","description":"Review page for accepting/rejecting changes.\n\n## PRD References\n- Task 5b.15\n- D27 (Evolution)\n\n## Acceptance Criteria\n- [ ] Diff summary displayed\n- [ ] Current pattern definition shown\n- [ ] Accept: update evidence\n- [ ] Reject: create violation\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/patterns/[id]/evolution/[requestId]/page.tsx\n- components/patterns/evolution-review.tsx\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:49.546476-05:00","updated_at":"2025-12-20T20:40:49.546476-05:00"}
{"id":"mantle-wja","title":"Build 'Connect Repo' button and initial dashboard","description":"UI for connecting repos and viewing connected repos.\n\n## PRD References\n- Task 2.5\n\n## Acceptance Criteria\n- [ ] Dashboard shows connected repos\n- [ ] Connect button triggers installation flow\n- [ ] Repo cards show ingestion status\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/dashboard/page.tsx\n- components/repos/connect-button.tsx\n- components/repos/repo-card.tsx\n\n### Dependencies\nNone\n\n### Notes\nEmpty state with clear CTA.\nRealtime status updates.\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:39:18.380109-05:00","updated_at":"2025-12-20T20:39:18.380109-05:00","dependencies":[{"issue_id":"mantle-wja","depends_on_id":"mantle-457","type":"parent-child","created_at":"2025-12-20T20:39:18.444449-05:00","created_by":"daemon"},{"issue_id":"mantle-wja","depends_on_id":"mantle-r46","type":"blocks","created_at":"2025-12-20T20:39:18.508344-05:00","created_by":"daemon"}]}
{"id":"mantle-x1x","title":"Implement daily auto-archive scheduled job","description":"Archive weak patterns unreviewed for 60 days.\n\n## PRD References\n- Task 6.10\n- D18 (Rejection)\n\n## Acceptance Criteria\n- [ ] Daily job at 03:00 UTC\n- [ ] Weak patterns 60+ days auto-rejected\n- [ ] rejectionReason set\n\n## Implementation Details\n\n### Files to Create/Modify\n- jobs/auto-archive.ts\n\n### Dependencies\n- @trigger.dev/sdk\n\n## Effort\n3 hours","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T20:40:50.659273-05:00","updated_at":"2025-12-20T20:40:50.659273-05:00"}
{"id":"mantle-xse","title":"Build violation detail page with dismiss action","description":"View and dismiss violations from PR comments.\n\n## PRD References\n- Task 5b.14\n- D26 (Dismissal)\n\n## Acceptance Criteria\n- [ ] Violation details displayed\n- [ ] Dismiss with optional reason\n- [ ] False positive checkbox\n- [ ] Auth required\n\n## Implementation Details\n\n### Files to Create/Modify\n- app/violations/[id]/page.tsx\n- components/violations/dismiss-modal.tsx\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:49.46032-05:00","updated_at":"2025-12-20T20:40:49.46032-05:00"}
{"id":"mantle-y8f","title":"Build code pattern violation detection for PRs","description":"Compare PR diff against authoritative patterns.\n\n## PRD References\n- Task 5b.3\n- D30 (Dual channel)\n\n## Acceptance Criteria\n- [ ] Only prReview=true patterns checked\n- [ ] Uses shared violation module\n- [ ] Returns violations\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/enforcement/pr-analysis.ts\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:48.311455-05:00","updated_at":"2025-12-20T20:40:48.311455-05:00","labels":["critical-path"]}
{"id":"mantle-ydn","title":"Format adapters for Claude and Cursor","description":"Adjust tone and structure for each tool.\n\n## PRD References\n- Task 5a.4\n- D32 (Formats)\n\n## Acceptance Criteria\n- [ ] Claude format: CLAUDE.md structure\n- [ ] Cursor format: .cursorrules structure\n- [ ] Tool-specific conventions respected\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/context-files/adapters/claude.ts\n- lib/context-files/adapters/cursor.ts\n\n## Effort\n3 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:47.562774-05:00","updated_at":"2025-12-20T20:40:47.562774-05:00"}
{"id":"mantle-yj8","title":"Build pattern confidence card UI","description":"Display dimension bars, tier badge, health warnings, insight.\n\n## PRD References\n- Task 4.1\n- D11 (Confidence)\n- D13 (Pattern mental model)\n\n## Acceptance Criteria\n- [ ] Four dimension bars for code patterns\n- [ ] Two dimension pills for filesystem patterns\n- [ ] Tier badge with color coding\n- [ ] Health warnings with category icons\n- [ ] Contextual insight text\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/confidence-card.tsx\n- components/patterns/dimension-bar.tsx\n- components/patterns/health-warnings.tsx\n- components/patterns/insight-panel.tsx\n\n### Notes\nPer D13: Progressive disclosure.\n80% of decisions from card alone.\n\n## Effort\n6 hours","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-20T20:40:45.508379-05:00","updated_at":"2025-12-20T20:40:45.508379-05:00"}
{"id":"mantle-ytl","title":"Marker-based file append logic","description":"Detect markers and replace only managed section.\n\n## PRD References\n- Task 5a.6\n- D33 (Marker-based append)\n\n## Acceptance Criteria\n- [ ] Markers: \u003c!-- REASONING_SUBSTRATE_START/END --\u003e\n- [ ] User content outside markers preserved\n- [ ] New files created with just managed section\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/context-files/marker-append.ts\n\n### Notes\nNever touch content outside markers.\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:47.73166-05:00","updated_at":"2025-12-20T20:40:47.73166-05:00"}
{"id":"mantle-z8l","title":"Display contextual insight and suggested actions","description":"Show generated insight with actionable suggestions.\n\n## PRD References\n- Task 4.2\n\n## Acceptance Criteria\n- [ ] Insight text displayed prominently\n- [ ] Suggested actions as clickable buttons\n\n## Implementation Details\n\n### Files to Create/Modify\n- components/patterns/insight-display.tsx\n\n## Effort\n2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-20T20:40:45.60525-05:00","updated_at":"2025-12-20T20:40:45.60525-05:00"}
{"id":"mantle-zn5","title":"Debounced sync trigger on pattern changes","description":"Trigger.dev job with 5-10s delay.\n\n## PRD References\n- Task 5a.7\n- D36 (Debounced sync)\n\n## Acceptance Criteria\n- [ ] Pattern changes queue regeneration\n- [ ] 5-10s debounce window\n- [ ] Batch multiple changes\n\n## Implementation Details\n\n### Files to Create/Modify\n- jobs/sync-context-files.ts\n\n### Dependencies\n- @trigger.dev/sdk\n\n## Effort\n4 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:47.816305-05:00","updated_at":"2025-12-20T20:40:47.816305-05:00"}
{"id":"mantle-zr2","title":"LLM rate limit handling with Trigger.dev retry","description":"Catch Anthropic 429, queue retry.\n\n## PRD References\n- Task 6.1f\n\n## Acceptance Criteria\n- [ ] 429 responses caught\n- [ ] Retry queued via Trigger.dev\n- [ ] Exponential backoff\n\n## Implementation Details\n\n### Files to Create/Modify\n- lib/anthropic/rate-limit.ts\n\n## Effort\n2 hours","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T20:40:49.973694-05:00","updated_at":"2025-12-20T20:40:49.973694-05:00"}
